import{_ as k,e as u}from"../../index-CWYf_R7c.js";import{I as w}from"./InboxOutlined-CdIAK4GV.js";import{U as F}from"./index-D70JqhWj.js";import{b as L,r as M,w as U,L as c,M as p,j as _,Q as S,V as o,u as x,F as T,a1 as N,Y as B,a2 as V,a3 as j,a4 as z}from"./vue-chunks-Bxyh5WP6.js";const d=l=>(j("data-v-4940e02c"),l=l(),z(),l),A={class:"ant-upload-drag-icon"},D=d(()=>o("div",{class:"ant-upload-text"},"点击或将文件拖拽到这里上传",-1)),E={class:"ant-upload-hint"},R=d(()=>o("p",null,"一次只能上传一个文档，单个文件不超过100M",-1)),W=d(()=>o("span",null,"支持文件类型：",-1)),O={__name:"upload-input",props:{value:{type:Array,default:()=>[]},maxCount:{type:Number,default:1},type:{type:[String,Number],default:0}},emits:["change","update:value"],setup(l,{emit:h}){const m=h,a=l;let n=["pdf","docx","ofd","txt","md","xlsx","csv","html"];a.type==2&&(n=["docx","csv","xlsx"]);const g=L(()=>n.map(e=>`.${e}`).join(",")),t=M([]);U(()=>a.value,e=>{t.value=e},{immediate:!0});let i=null;const C=()=>{if(t.value.length>=a.maxCount)return u.error("一次最多上传"+a.maxCount+"个文件")},f=()=>{t.value.length>a.maxCount&&u.error("一次最多上传"+a.maxCount+"个文件");let e=[...t.value];m("change",e),m("update:value",e)},b=e=>{y(e),f()},y=e=>{for(let s=0;s<t.value.length;s++)if(t.value[s].uid===e.uid){t.value.splice(s,1);break}},I=e=>{const s=e.name.split(".").pop();return n.includes(s.toLowerCase())?e.size/1024/1024<100?(t.value=[...t.value||[],e],t.value.length>a.maxCount&&(t.value=t.value.splice(0,a.maxCount)),i&&clearTimeout(i),i=setTimeout(()=>{f(),clearTimeout(i)},50),!1):(u.error("文件大小不能超过100M"),!1):(u.error("不支持的文件格式"),!1)};return(e,s)=>{const v=F;return c(),p("div",{class:V(["upload-input",{disabled:t.value.length>=a.maxCount}])},[_(v,{"file-list":t.value,name:"file",multiple:!0,"max-count":a.maxCount,accept:g.value,beforeUpload:I,onRemove:b,class:"ant-upload-drag"},{default:S(()=>[o("div",A,[_(x(w))]),D,o("div",E,[R,o("p",null,[W,(c(!0),p(T,null,N(x(n),r=>(c(),p("span",{class:"ant-upload-hint-ext",key:r},"."+B(r),1))),128))])])]),_:1},8,["file-list","max-count","accept"]),o("div",{class:"disabled-mask",onClick:C})],2)}}},G=k(O,[["__scopeId","data-v-4940e02c"]]);export{G as U};
