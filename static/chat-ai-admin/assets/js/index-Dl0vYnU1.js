import{L as t,M as o,V as e,a2 as K,a8 as f,F as w,a1 as I,Y as m,b as _e,r as x,ah as ue,j as a,Q as u,P as Q,u as k,X as C,E as W,G as Te,y as se,a9 as te,a3 as X,a4 as Z,w as de,A as Le,$ as Me,a0 as ce,a6 as Ie,v as Ee,B as Ae,a5 as Be}from"./vue-chunks-CX0PHdkT.js";import{_ as re,u as pe,a as Re}from"./chat-NWaBjl7g.js";import{_ as H,L as Oe,bh as De,c as oe,b1 as me,a as He,bi as Pe,B as Fe}from"../../index-CstSXCdU.js";import{S as ge}from"./index-BmmwwUfg.js";import{Q as O}from"./QuestionCircleOutlined-DWuvpisG.js";import{_ as he}from"./index-bwfsT3yL.js";import{C as Ne}from"./cu-scroll-qHXUFabe.js";import{_ as je}from"./TextArea-tZiQ0s1q.js";import{_ as ve}from"./index-OCgTXqUA.js";import{a as Ue}from"./index-rx7-r9I7.js";import{u as Qe}from"./robot-DP8aUH6y.js";import{B as ze,_ as Ve}from"./index-B1DDV-R2.js";import{P as Ke}from"./PlusOutlined-4Hup-Qb7.js";import"./index-BKhu31L8.js";import"./index-rKyjypP1.js";import"./axios-Cm0UX6qg.js";import"./qs-D52wVmk8.js";import"./crypto-js-ZYyBUTQg.js";import"./dayjs-DItM2b4N.js";import"./colors-C2VfdtVY.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./pull-up.esm-JZ91zQ8P.js";import"./FormItemContext-BHAiblOr.js";import"./statusUtils-DAHCu8QH.js";import"./index-v-hTEyV7.js";import"./inputProps-BGPPkc5V.js";import"./index-BHTxBMxE.js";import"./dropdown-ncLr3TGE.js";import"./Dropdown-BXle2wjv.js";import"./RightOutlined-CGdQ7_SL.js";import"./move-7f3qAgDa.js";import"./slide-C2DT8m2K.js";import"./index-CPSClIuB.js";import"./shallowequal-BtoafKsn.js";import"./collapseMotion-7Vnsd4b5.js";import"./DownOutlined-DGhSUoaY.js";const Ge={class:"guess-you-want"},Ye={class:"message-tabs"},Je={key:1,class:"v-line"},We={key:0,class:"message-menus"},Xe=["onClick"],Ze={key:1,class:"message-menus"},et=["onClick"],tt={__name:"guess-you-want",props:{item:{type:Object,default:()=>{}},common_question_list:{type:Object,default:()=>[]},enable_common_question:{type:Boolean,default:!1}},emits:["clickMeun"],setup(_,{emit:T}){const y=T,s=_,g=(b,c)=>{b.question_tabkey=c},$=b=>{y("clickMeun",b)};return(b,c)=>(t(),o("div",Ge,[e("div",Ye,[s.item.guess_you_want?(t(),o("div",{key:0,onClick:c[0]||(c[0]=i=>g(s.item,1)),class:K(["tab-item",{active:s.item.question_tabkey==1}])}," 猜你想问 ",2)):f("",!0),s.item.guess_you_want&&s.common_question_list&&s.enable_common_question?(t(),o("div",Je)):f("",!0),s.common_question_list&&s.enable_common_question?(t(),o("div",{key:2,onClick:c[1]||(c[1]=i=>g(s.item,2)),class:K(["tab-item",{active:s.item.question_tabkey==2}])}," 常见问题 ",2)):f("",!0)]),s.item.question_tabkey==1?(t(),o("div",We,[(t(!0),o(w,null,I(s.item.guess_you_want,(i,n)=>(t(),o("div",{onClick:r=>$(i),class:"menu-item",key:n},m(i),9,Xe))),128))])):(t(),o("div",Ze,[(t(!0),o(w,null,I(_.common_question_list,(i,n)=>(t(),o("div",{onClick:r=>$(i),class:"menu-item",key:n},m(i),9,et))),128))]))]))}},st=H(tt,[["__scopeId","data-v-9c22a890"]]),fe=_=>(X("data-v-9e67229e"),_=_(),Z(),_),ot={class:"message-list-wrapper"},nt={class:"message-list"},lt=["id"],at={class:"itme-left"},it=["src"],ct={class:"itme-right"},rt={class:"item-body"},_t={class:"message-content"},ut=["id"],dt={class:"itme-left"},pt=["src"],mt={class:"itme-right"},gt=["onClick"],ht={class:"label-text"},vt={class:"item-body"},ft={key:0,class:"thinking-content"},yt={class:"message-content"},bt={class:"message-menus"},kt=["onClick"],$t=["innerHTML"],wt={class:"message-menus"},qt=["onClick"],St={key:3,class:"message-content"},Ct=["src"],xt={key:4,class:"message-action-wrap"},Tt={class:"message-action"},Lt={key:0,class:"action-btn"},Mt=fe(()=>e("span",null,"答案来源 ",-1)),It=fe(()=>e("span",null,"您可以修改相应文档并重新上传，以调整机器人的回答效果。答案来源仅后台测试时可见。",-1)),Et={key:1,class:"action-btn"},At=["onClick"],Bt={key:0,class:"file-items"},Rt=["onClick"],Ot={class:"file-name"},Dt={__name:"message-list",props:{messages:{type:Array,default:()=>[]},robotInfo:{type:Object,default:()=>{}}},emits:["clickMsgMeun","scroll","scrollStart","scrollEnd","openPromptLog","openLibrary"],setup(_,{expose:T,emit:y}){const s=y,g=_,$=d=>{d.show_reasoning=!d.show_reasoning},b=_e(()=>g.robotInfo.common_question_list.length?JSON.parse(g.robotInfo.common_question_list):[]),c=d=>{s("clickMsgMeun",d)},i=x(null),n={scrollTop:0,scrollHeight:0,clientHeight:0,scrollStartDiff:60,scrollEndDiff:60,scrollDirection:""};let r=null,p=!1;function B(d){p||(r&&(clearTimeout(r),r=null),r=setTimeout(()=>{n.scrollTop-d.target.scrollTop>0&&(n.scrollDirection="up"),n.scrollTop-d.target.scrollTop<0&&(n.scrollDirection="down"),n.scrollTop=d.target.scrollTop,n.scrollHeight=d.target.scrollHeight,n.clientHeight=d.target.clientHeight,s("scroll",{...n}),Math.abs(n.scrollTop)<=n.scrollStartDiff&&n.scrollDirection==="up"&&F(),Math.abs(n.scrollHeight-n.scrollTop-n.clientHeight)<=n.scrollEndDiff&&n.scrollDirection==="down"&&N()},50))}function F(){g.messages.length!=0&&s("scrollStart",{msg:g.messages[0]})}function N(){g.messages.length!=0&&s("scrollEnd",{msg:g.messages[g.messages.length-1]})}const q=()=>{i.value&&se(()=>{p=!0,i.value.scrollTop=i.value.scrollHeight+1,setTimeout(()=>{n.scrollTop=i.value.scrollTop,p=!1},50)})};function L(d,E){se(()=>{p=!0,E||(E="top");let A=i.value,M=document.querySelector("#msg-"+d);E=="top"?A.scrollTop=M.offsetTop:A.scrollTop=M.offsetTop-A.clientHeight+M.clientHeight,setTimeout(()=>{n.scrollTop=i.value.scrollTop,p=!1},50)})}function G(){n.scrollTop=0,n.scrollDirection=""}function z(d){return!!(d.quote_file&&d.quote_file.length>0||d.debug&&d.debug.length>0)}function D(d){s("openPromptLog",te(d))}function h(d,E,A){let M=te(d);M.forEach(j=>{j.message_id=A}),s("openLibrary",M,te(E))}return T({scrollToBottom:q,scrollToMessage:L,resetScroll:G}),(d,E)=>{const A=ge,M=oe,j=he,Y=ue("viewer");return t(),o("div",ot,[e("div",{class:"scroll-box",ref_key:"scrollBoxRef",ref:i,onScroll:B},[e("div",nt,[(t(!0),o(w,null,I(g.messages,l=>(t(),o(w,{key:l.uid},[l.is_customer==1?(t(),o("div",{key:0,class:"message-item user-message",id:"msg-"+l.uid},[e("div",at,[e("img",{class:"user-avatar",src:l.avatar},null,8,it)]),e("div",ct,[e("div",rt,[e("div",_t,m(l.content),1)])])],8,lt)):(t(),o("div",{key:1,class:"message-item robot-message",id:"msg-"+l.uid},[e("div",dt,[a(A,{size:"small",spinning:l.loading},{default:u(()=>[e("img",{class:"robot-avatar",src:l.robot_avatar},null,8,pt)]),_:2},1032,["spinning"])]),e("div",mt,[l.reasoning_content?(t(),o("div",{key:0,class:K(["thinking-label-wrapper",{reasoning_open:l.show_reasoning}])},[e("div",{class:"thinking-label",onClick:S=>$(l)},[l.reasoning_status?(t(),Q(k(Oe),{key:0,class:"loading"})):(t(),Q(M,{key:1,class:"think-icon",name:"think"})),e("span",ht,m(l.reasoning_status?"深度思考中...":"已完成深度思考"),1),l.reasoning_status?f("",!0):(t(),Q(M,{key:2,name:"arrow-down",class:"arrow-down"}))],8,gt),a(j,null,{title:u(()=>[C("在应用设置中关闭推理过程开关，将不再显示推理过程")]),default:u(()=>[a(k(De),{class:"tip"})]),_:1})],2)):f("",!0),e("div",vt,[l.show_reasoning?(t(),o("div",ft,[a(re,{content:l.reasoning_content},null,8,["content"])])):f("",!0),l.msg_type==1?(t(),o(w,{key:1},[W((t(),o("div",yt,[a(re,{content:l.content},null,8,["content"])])),[[Y]]),e("div",bt,[(t(!0),o(w,null,I(l.question,(S,U)=>(t(),o("div",{class:"menu-item",onClick:J=>c(S),key:U},m(S),9,kt))),128))])],64)):f("",!0),l.msg_type==2?(t(),o(w,{key:2},[e("div",{class:"message-content",innerHTML:l.menu_json.content},null,8,$t),e("div",wt,[(t(!0),o(w,null,I(l.menu_json.question,(S,U)=>(t(),o("div",{class:"menu-item",onClick:J=>c(S),key:U},m(S),9,qt))),128))])],64)):f("",!0),l.msg_type==3?(t(),o("div",St,[W(e("img",{class:"msg-img",src:l.content,alt:""},null,8,Ct),[[Y]])])):f("",!0),z(l)?W((t(),o("div",xt,[e("div",Tt,[l.quote_file&&l.quote_file.length>0?(t(),o("div",Lt,[Mt,a(j,{placement:"top",overlayInnerStyle:{width:"400px"}},{title:u(()=>[It]),default:u(()=>[a(k(O))]),_:1})])):f("",!0),l.debug&&l.debug.length>0?(t(),o("div",Et,[e("span",null,[e("a",{onClick:S=>D(l)},"Prompt 日志",8,At)])])):f("",!0)]),l.quote_file&&l.quote_file.length>0?(t(),o("div",Bt,[(t(!0),o(w,null,I(l.quote_file,S=>(t(),o("div",{class:"file-item",key:S.id,onClick:U=>h(l.quote_file,S,l.id)},[e("a",Ot,m(S.file_name),1)],8,Rt))),128))])):f("",!0)],512)),[[Te,!l.question]]):f("",!0)]),(l.guess_you_want&&l.guess_you_want.length||b.value.length&&g.robotInfo.enable_common_question=="true")&&l.question_tabkey>0?(t(),Q(st,{key:1,item:l,enable_common_question:g.robotInfo.enable_common_question=="true",common_question_list:b.value,onClickMeun:c},null,8,["item","enable_common_question","common_question_list"])):f("",!0)])],8,ut))],64))),128))])],544)])}}},Ht=H(Dt,[["__scopeId","data-v-9e67229e"]]),Pt={class:"chat-list-box"},Ft=["onClick"],Nt={class:"chat-item-title"},jt={__name:"chat-list",props:{list:{type:Array,default:()=>[]},active:{type:[String,Number],default:""}},emits:["openChat","onScrollEnd"],setup(_,{emit:T}){const y=T,s=_,g=x(null),$=c=>{y("openChat",c)},b=()=>{y("onScrollEnd")};return de(()=>s.list,()=>{se(()=>{g.value.refresh()})}),(c,i)=>{const n=oe;return t(),o("div",Pt,[a(Ne,{ref_key:"scroller",ref:g,onOnScrollEnd:b},{default:u(()=>[e("div",null,[(t(!0),o(w,null,I(s.list,r=>(t(),o("div",{class:K(["chat-list-item",{active:r.id==s.active}]),onClick:p=>$(r),key:r.id},[a(n,{class:"chat-item-icon",name:"message"}),e("span",Nt,m(r.subject||r.last_chat_message),1)],10,Ft))),128))])]),_:1},512)])}}},Ut=H(jt,[["__scopeId","data-v-8a5dd127"]]),Qt=_=>(X("data-v-47f207c0"),_=_(),Z(),_),zt={class:"message-input-wrapper"},Vt={class:"message-action"},Kt={class:"loading-action"},Gt=["disabled"],Yt=Qt(()=>e("span",null,"发送",-1)),Jt=[Yt],Wt={__name:"message-input",props:{value:{type:String,default:""},loading:{type:Boolean,default:!1}},emits:["send","update:value"],setup(_,{emit:T}){const y=T,s=_,g=_e(()=>s.loading||s.value.trim().length===0),$=i=>{y("update:value",i.target.value.trim())},b=i=>{if(i.key==="Enter"&&!i.shiftKey){if(!i.target.value.trim())return;i.preventDefault(),c()}else i.key==="Enter"&&i.shiftKey&&(i.preventDefault(),y("update:value",s.value+`
`))},c=()=>{y("send",s.value.trim())};return(i,n)=>{const r=je,p=ge;return t(),o("div",zt,[a(r,{value:_.value,"auto-size":{minRows:5,maxRows:5},placeholder:"在此输入您想了解的内容，Shift+Enter换行",onChange:$,onKeydown:b},null,8,["value"]),e("div",Vt,[e("span",Kt,[a(p,{spinning:_.loading},null,8,["spinning"])]),_.loading?f("",!0):(t(),o("button",{key:0,class:"send-msg-btn",disabled:g.value,onClick:c},Jt,8,Gt))])])}}},Xt=H(Wt,[["__scopeId","data-v-47f207c0"]]),P=_=>(X("data-v-c821359c"),_=_(),Z(),_),Zt={class:"prompt-log-content"},es={class:"prompt-log-items"},ts={class:"prompt-log-label"},ss=P(()=>e("span",null,"SYSTEM ",-1)),os={class:"prompt-log-item"},ns={class:"prompt-log-items"},ls={class:"prompt-log-label"},as=P(()=>e("span",null,"上下文 ",-1)),is={class:"prompt-log-items"},cs={class:"prompt-log-label"},rs=P(()=>e("span",null,"USER ",-1)),_s={class:"prompt-log-item"},us={class:"prompt-log-items"},ds={class:"prompt-log-label"},ps=P(()=>e("span",null,"ASSISTANT ",-1)),ms={class:"prompt-log-item"},gs={key:0,class:"prompt-log-items"},hs={class:"prompt-log-label"},vs=P(()=>e("span",null,"Recall time ",-1)),fs={class:"prompt-log-item"},ys={key:1,class:"prompt-log-items"},bs={class:"prompt-log-label"},ks=P(()=>e("span",null,"Request time ",-1)),$s={class:"prompt-log-item"},ws={class:"prompt-log-items"},qs={class:"prompt-log-label"},Ss=P(()=>e("span",null,"Error ",-1)),Cs={class:"prompt-log-item"},xs={__name:"prompt-log-alert",setup(_,{expose:T}){const y=x(!1),s=Le({prompt:"",library:[],context_qa:[],cur_question:"",cur_answer:"",error:""}),g=()=>{y.value=!1},$=()=>{s.prompt="",s.library=[],s.context_qa=[],s.cur_question="",s.cur_answer="",s.error="",s.recall_time="",s.request_time=""};return T({open:c=>{$(),s.error=c.error,s.recall_time=c.recall_time?(c.recall_time/1e3).toFixed(2):"",s.request_time=c.request_time?(c.request_time/1e3).toFixed(2):"";let i=c.debug||[];for(let n=0;n<i.length;n++){let r=i[n];r.type=="library"?s.library.push(r.content):r.type=="context_qa"?s.context_qa.push(r):s[r.type]=r.content}y.value=!0}}),(c,i)=>{const n=he,r=ve;return t(),Q(r,{class:"prompt-log-alert",open:y.value,"onUpdate:open":i[0]||(i[0]=p=>y.value=p),title:"Prompt 日志",placement:"right",width:"746px",closable:!1},{extra:u(()=>[e("span",{class:"close-btn",onClick:g},[a(k(me))])]),default:u(()=>[e("div",Zt,[e("div",es,[e("div",ts,[ss,a(n,null,{title:u(()=>[C("系统提示词和文档分段。")]),default:u(()=>[a(k(O),{class:"question-icon"})]),_:1})]),e("div",os,[e("p",null,m(s.prompt),1)]),(t(!0),o(w,null,I(s.library,(p,B)=>(t(),o("div",{class:"prompt-log-item",key:B},[e("p",null,m(p),1)]))),128))]),e("div",ns,[e("div",ls,[as,a(n,null,{title:u(()=>[C("传递的历史提问消息")]),default:u(()=>[a(k(O),{class:"question-icon"})]),_:1})]),(t(!0),o(w,null,I(s.context_qa,(p,B)=>(t(),o("div",{class:"prompt-log-item",key:B},[e("p",null,"Q："+m(p.question),1),e("p",null,"A："+m(p.answer),1)]))),128))]),e("div",is,[e("div",cs,[rs,a(n,null,{title:u(()=>[C("本次用户的提问")]),default:u(()=>[a(k(O),{class:"question-icon"})]),_:1})]),e("div",_s,[e("p",null,m(s.cur_question),1)])]),e("div",us,[e("div",ds,[ps,a(n,null,{title:u(()=>[C("语言模型输出的答案")]),default:u(()=>[a(k(O),{class:"question-icon"})]),_:1})]),e("div",ms,[e("p",null,m(s.cur_answer),1)])]),s.recall_time>0?(t(),o("div",gs,[e("div",hs,[vs,a(n,null,{title:u(()=>[C("从知识库中检索到有效分段所需要的时间，包括对分段进行排序时间。")]),default:u(()=>[a(k(O),{class:"question-icon"})]),_:1})]),e("div",fs,[e("p",null,m(s.recall_time)+"s",1)])])):f("",!0),s.request_time>0?(t(),o("div",ys,[e("div",bs,[ks,a(n,null,{title:u(()=>[C("从发送问题和上下文信息给大模型到大模型开始返回答案的时间。")]),default:u(()=>[a(k(O),{class:"question-icon"})]),_:1})]),e("div",$s,[e("p",null,m(s.request_time)+"s",1)])])):f("",!0),e("div",ws,[e("div",qs,[Ss,a(n,null,{title:u(()=>[C("报错信息，调用聊天接口报错时会显示。")]),default:u(()=>[a(k(O),{class:"question-icon"})]),_:1})]),e("div",Cs,[e("p",null,m(s.error),1)])])])]),_:1},8,["open"])}}},Ts=H(xs,[["__scopeId","data-v-c821359c"]]),Ls={class:"library-info-content"},Ms={class:"file-list"},Is=["onClick"],Es={class:"document-items"},As={class:"document-item-header"},Bs={class:"left-box"},Rs={class:"document-title"},Os={key:0,class:"document-title"},Ds={class:"document-size"},Hs={class:"document-item-body"},Ps={class:"document-similarity"},Fs={key:0,class:"document-content"},Ns={key:1,class:"document-content"},js={class:"document-content"},Us={class:"fragment-img"},Qs=["src"],zs={__name:"library-info-alert",setup(_,{expose:T}){const y=pe(),{robot:s}=y,g=Me(),$=x(!1),b=x([]),c=x(null),i=()=>{b.value=[],c.value=null},n=(q,L)=>{i(),b.value=q,c.value=L.id,$.value=!0,B(L)},r=q=>{q.id!=c.value&&(c.value=q.id,B(q))},p=x([]),B=q=>{Ue({message_id:q.message_id,file_id:q.id,robot_key:s.robot_key,openid:s.openid}).then(L=>{p.value=L.data||[]})},F=()=>{g.push("/library/preview?id="+c.value)},N=()=>{$.value=!1};return T({open:n}),(q,L)=>{const G=oe,z=ve,D=ue("viewer");return t(),Q(z,{class:"library-info-alert",open:$.value,"onUpdate:open":L[0]||(L[0]=h=>$.value=h),title:"答案来源",placement:"right",width:"746px",closable:!1,bodyStyle:{background:"#F2F4F7"}},{extra:u(()=>[e("span",{class:"close-btn",onClick:N},[a(k(me))])]),default:u(()=>[e("div",Ls,[e("div",Ms,[(t(!0),o(w,null,I(b.value,h=>(t(),o("div",{class:K(["file-item",{active:c.value==h.id}]),key:h.id,onClick:d=>r(h)},m(h.file_name),11,Is))),128))]),e("div",Es,[(t(!0),o(w,null,I(p.value,h=>(t(),o("div",{class:"document-item",key:h.id},[e("div",As,[e("div",Bs,[e("span",Rs,"id："+m(h.id),1),h.title?(t(),o("span",Os,m(h.title),1)):f("",!0),e("span",Ds," 共"+m(h.word_total)+"个字符 ",1)]),e("div",{class:"right-box"},[e("a",{onClick:F},"查看源文档>")])]),e("div",Hs,[e("div",Ps,[C(" 相似度： "),a(G,{name:"similarity",style:{"font-size":"16px"}}),C(m(h.similarity),1)]),h.question?(t(),o("div",Fs,"Q："+m(h.question),1)):f("",!0),h.answer?(t(),o("div",Ns,"A："+m(h.answer),1)):f("",!0),e("div",js,m(h.content),1),W((t(),o("div",Us,[(t(!0),o(w,null,I(h.images,(d,E)=>(t(),o("img",{key:E,src:d,alt:""},null,8,Qs))),128))])),[[D]])])]))),128))])])]),_:1},8,["open"])}}},Vs=H(zs,[["__scopeId","data-v-73685362"]]),Ks=_=>(X("data-v-6414ab8d"),_=_(),Z(),_),Gs={class:"chat-page-wrapper"},Ys={class:"chat-page-header"},Js={class:"breadcrumb-box"},Ws={class:"chat-page"},Xs={class:"page-left"},Zs={class:"page-left-top"},eo={class:"page-left-body"},to=Ks(()=>e("div",{class:"page-left-footer"},null,-1)),so={class:"page-body"},oo={class:"chat-box-body"},no={style:{"margin-top":"30px"},class:"chat-box-footer"},lo={__name:"index",setup(_){const y=ce().query,s=Qe(),{getRobot:g,robotInfo:$}=s,b=Re(),c=pe(),i=He();let n=!0;const r=x(""),p=x(null),{createChat:B,sendMessage:F,getMyChatList:N,openChat:q,onGetChatMessage:L,changeRobotPrompt:G,$reset:z}=c,{messageList:D,sendLock:h,myChatList:d,robot:E,dialogue_id:A}=Ie(c),M=ce(),j=x(!1),Y=async()=>{if(!r.value)return Pe("请输入消息内容");n=!0,F({message:r.value}),r.value=""},l=async()=>{n=!0,r.value="";let v=M.query||{},R=i.user_id,V={robot_key:v.robot_key,avatar:v.avatar,name:v.name,nickname:v.nickname,is_background:1,openid:R,dialogue_id:0};le(),await B(V)},S=async v=>{if(A.value==v.dialogue_id)return;n=!0;let V={robot_key:(M.query||{}).robot_key,avatar:v.avatar,name:v.name,nickname:v.nickname,is_background:v.is_background,openid:v.openid,dialogue_id:v.id};le(),await q(V),await L()&&ne()},U=v=>{n=!0,F({message:v})};x(!1);const J=()=>{ne()},ye=async()=>{n=!1;let v=D.value[0].uid;await L()&&ke(v)},be=()=>{},ne=()=>{p.value&&n&&p.value.scrollToBottom()},ke=v=>{p.value&&p.value.scrollToMessage(v)},le=()=>{p.value&&p.value.resetScroll()},$e=()=>{N()},ae=x(null),we=v=>{ae.value.open(v)},ie=x(null),qe=(v,R)=>{ie.value.open(v,R)};return de(()=>D.value,()=>{}),Ee(async()=>{l(),N(),await g(y.id),j.value=!0,b.on("updateAiMessage",J)}),Ae(()=>{z(),b.off("updateAiMessage",J)}),(v,R)=>{const V=Be("router-link"),ee=Ve,Se=ze,Ce=Fe;return t(),o("div",Gs,[e("div",Ys,[e("div",Js,[a(Se,null,{default:u(()=>[a(ee,null,{default:u(()=>[a(V,{to:"/robot/list"},{default:u(()=>[C("机器人管理")]),_:1})]),_:1}),a(ee,null,{default:u(()=>[C(m(k(E).robot_name),1)]),_:1})]),_:1})])]),e("div",Ws,[e("div",Xs,[e("div",Zs,[a(Ce,{type:"primary",block:"",ghost:"",onClick:l},{default:u(()=>[a(k(Ke)),C(" 新建对话")]),_:1})]),e("div",eo,[a(Ut,{list:k(d),active:k(A),onOpenChat:S,onOnScrollEnd:$e},null,8,["list","active"])]),to]),e("div",so,[e("div",oo,[a(Ht,{ref_key:"messageListRef",ref:p,messages:k(D),robotInfo:k($),onClickMsgMeun:U,onScrollStart:ye,onScrollEnd:be,onOpenPromptLog:we,onOpenLibrary:qe},null,8,["messages","robotInfo"])]),e("div",no,[a(Xt,{value:r.value,"onUpdate:value":R[0]||(R[0]=xe=>r.value=xe),onSend:Y,loading:k(h)},null,8,["value","loading"])])]),e("div",null,[f("",!0)])]),a(Ts,{ref_key:"promptLogAlertRef",ref:ae},null,512),a(Vs,{ref_key:"libraryInfoAlertRef",ref:ie},null,512)])}}},Uo=H(lo,[["__scopeId","data-v-6414ab8d"]]);export{Uo as default};
