import{C as Ve}from"./cu-scroll-D0ctTl0C.js";import{aF as He,V as Ke,aB as Xe,av as H,b1 as Ye,aI as Ge,bp as Je,a_ as Qe,aC as We,aL as Ze,bq as et,aA as re,aM as tt,aZ as W,br as ot,aD as he,b7 as nt,bs as ke,B as Le,bt as at,az as lt,_ as pe,e as G,c as Ie,M as ae,S as st,T as it,bo as dt,m as rt,b6 as ct,K as be}from"../../index-CyiwD4fB.js";import{e as ut,r as R,af as _t,b as Ce,j as e,$ as Ne,a0 as Oe,A as Z,L as i,M as h,Q as t,V as l,U as mt,u as X,X as q,P as A,F as J,a1 as ce,a2 as pt,Y as E,a8 as $,a9 as ue,w as xe,v as Te,B as ft,a7 as vt,a3 as gt,a4 as yt}from"./vue-chunks-CwaUyaYI.js";import{i as _e,j as ht,k as kt,l as bt}from"./index-CnXWAABj.js";import{U as Ct}from"./upload-input-Cb6VRtKL.js";import{t as we}from"./validate-8MtiUsxW.js";import{F as me,_ as Pe}from"./index-BfwAi9te.js";import"./index-D8wyBl4m.js";import{I as $e}from"./Input-Da8aOOO7.js";import"./index-DzmLM5l_.js";import{R as xt,_ as wt}from"./RadioButton-DM2pQQZg.js";import{c as St}from"./index-BWAwk653.js";import{_ as qe}from"./index-BttTL6gl.js";import{S as De,a as Lt,_ as Me}from"./index-BfzgEQpv.js";import{_ as It,M as Nt}from"./index-CJQbsUHv.js";import"./index-CSJ_nh2m.js";import{D as Ot}from"./dropdown-DVS-KA0T.js";import{S as Tt}from"./index-DPSrDAUj.js";import{_ as Pt}from"./index-D5a-1ZEA.js";import{t as $t,a as qt,_ as Dt}from"./index-D97187b8.js";import{u as Mt}from"./CheckOutlined-s6Wk7FwS.js";import{P as zt}from"./PlusOutlined-C0mU79gr.js";import{S as Ft}from"./SearchOutlined-eG2BTg8a.js";import{C as Se}from"./ClockCircleFilled-HCbA8Aro.js";import{M as Bt}from"./MoreOutlined-CGTyGwVY.js";import{a as Rt}from"./index-S6mKCqwW.js";import{_ as Ut}from"./TextArea-CBrdn4Xi.js";import"./dayjs-9pTjq58W.js";import"./axios-Cm0UX6qg.js";import"./qs-DFTLuGGg.js";import"./crypto-js-Dhiry31a.js";import"./InboxOutlined-8QqjwpQc.js";import"./index-CmFdMhoo.js";import"./partition-D90jzHoI.js";import"./colors-DcCY69fx.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./Password-DAieTXDw.js";import"./inputProps-CBCbV3dR.js";import"./useRefs-kFALIf8n.js";import"./collapseMotion-1cFzdZPo.js";import"./FormItemContext-P-hc85qB.js";import"./responsiveObserve-DlRq3u3d.js";import"./QuestionCircleOutlined-CGJPYPeU.js";import"./index-B-VUp88E.js";import"./Search-DC1Sahrq.js";import"./slide-kUXvfLu3.js";import"./index-gIgkZ2l6.js";import"./isMobile-D_4OiXLP.js";import"./DownOutlined-D6oDy9l0.js";import"./move-7FTT7O3Y.js";import"./shallowequal-Cp-ZNK9a.js";import"./Dropdown-McYrymK_.js";import"./RightOutlined-BdOii4h-.js";import"./css-CchdbAeU.js";import"./LeftOutlined-lkvnet3y.js";import"./index-CZI6jsTS.js";const Et=o=>{const{componentCls:S,iconCls:_,zIndexPopup:g,colorText:d,colorWarning:p,marginXS:I,fontSize:N,fontWeightStrong:f,lineHeight:F}=o;return{[S]:{zIndex:g,[`${S}-inner-content`]:{color:d},[`${S}-message`]:{position:"relative",marginBottom:I,color:d,fontSize:N,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${S}-message-icon ${_}`]:{color:p,fontSize:N,flex:"none",lineHeight:1,paddingTop:(Math.round(N*F)-N)/2},"&-title":{flex:"auto",marginInlineStart:I},"&-title-only":{fontWeight:f}},[`${S}-description`]:{position:"relative",marginInlineStart:N+I,marginBottom:I,color:d,fontSize:N},[`${S}-buttons`]:{textAlign:"end",button:{marginInlineStart:I}}}}},At=He("Popconfirm",o=>Et(o),o=>{const{zIndexPopupBase:S}=o;return{zIndexPopup:S+60}});var jt=function(o,S){var _={};for(var g in o)Object.prototype.hasOwnProperty.call(o,g)&&S.indexOf(g)<0&&(_[g]=o[g]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,g=Object.getOwnPropertySymbols(o);d<g.length;d++)S.indexOf(g[d])<0&&Object.prototype.propertyIsEnumerable.call(o,g[d])&&(_[g[d]]=o[g[d]]);return _};const Vt=()=>H(H({},qt()),{prefixCls:String,content:W(),title:W(),description:W(),okType:ot("primary"),disabled:{type:Boolean,default:!1},okText:W(),cancelText:W(),icon:W(),okButtonProps:he(),cancelButtonProps:he(),showCancel:{type:Boolean,default:!0},onConfirm:Function,onCancel:Function}),Ht=ut({compatConfig:{MODE:3},name:"APopconfirm",inheritAttrs:!1,props:Xe(Vt(),H(H({},$t()),{trigger:"click",placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0,okType:"primary",disabled:!1})),slots:Object,setup(o,S){let{slots:_,emit:g,expose:d,attrs:p}=S;const I=R();Ye(o.visible===void 0),d({getPopupDomNode:()=>{var n,m;return(m=(n=I.value)===null||n===void 0?void 0:n.getPopupDomNode)===null||m===void 0?void 0:m.call(n)}});const[N,f]=Mt(!1,{value:_t(o,"open")}),F=(n,m)=>{o.open===void 0&&f(n),g("update:open",n),g("openChange",n,m)},O=n=>{F(!1,n)},k=n=>{var m;return(m=o.onConfirm)===null||m===void 0?void 0:m.call(o,n)},c=n=>{var m;F(!1,n),(m=o.onCancel)===null||m===void 0||m.call(o,n)},L=n=>{n.keyCode===lt.ESC&&N&&F(!1,n)},P=n=>{const{disabled:m}=o;m||F(n)},{prefixCls:y,getPrefixCls:v}=Ge("popconfirm",o),B=Ce(()=>v()),T=Ce(()=>v("btn")),[x]=At(y),[M]=Je("Popconfirm",Qe.Popconfirm),U=()=>{var n,m,r,K,j;const{okButtonProps:b,cancelButtonProps:Q,title:w=(n=_.title)===null||n===void 0?void 0:n.call(_),description:ee=(m=_.description)===null||m===void 0?void 0:m.call(_),cancelText:le=(r=_.cancel)===null||r===void 0?void 0:r.call(_),okText:se=(K=_.okText)===null||K===void 0?void 0:K.call(_),okType:oe,icon:s=((j=_.icon)===null||j===void 0?void 0:j.call(_))||e(nt,null,null),showCancel:a=!0}=o,{cancelButton:z,okButton:V}=_,D=H({onClick:c,size:"small"},Q),ne=H(H(H({onClick:k},ke(oe)),{size:"small"}),b);return e("div",{class:`${y.value}-inner-content`},[e("div",{class:`${y.value}-message`},[s&&e("span",{class:`${y.value}-message-icon`},[s]),e("div",{class:[`${y.value}-message-title`,{[`${y.value}-message-title-only`]:!!ee}]},[w])]),ee&&e("div",{class:`${y.value}-description`},[ee]),e("div",{class:`${y.value}-buttons`},[a?z?z(D):e(Le,D,{default:()=>[le||M.value.cancelText]}):null,V?V(ne):e(at,{buttonProps:H(H({size:"small"},ke(oe)),b),actionFn:k,close:O,prefixCls:T.value,quitOnNullishReturnValue:!0,emitEvent:!0},{default:()=>[se||M.value.okText]})])])};return()=>{var n;const{placement:m,overlayClassName:r,trigger:K="click"}=o,j=jt(o,["placement","overlayClassName","trigger"]),b=We(j,["title","content","cancelText","okText","onUpdate:open","onConfirm","onCancel","prefixCls"]),Q=Ze(y.value,r);return x(e(Pt,re(re(re({},b),p),{},{trigger:K,placement:m,onOpenChange:P,open:N.value,overlayClassName:Q,transitionName:tt(B.value,"zoom-big",o.transitionName),ref:I,"data-popover-inject":!0}),{default:()=>[et(((n=_.default)===null||n===void 0?void 0:n.call(_))||[],{onKeydown:w=>{L(w)}},!1)],content:U}))}}}),Kt=Ke(Ht),Xt={class:"form-box"},Yt={class:"upload-document-type-box"},Gt=["onClick"],Jt={class:"right-block"},Qt={class:"title-block"},Wt={class:"title-text"},Zt={class:"desc"},eo={__name:"add-custom-document",emits:["ok"],setup(o,{expose:S,emit:_}){const g=Ne(),d=Oe(),p=me.useForm,I=R(!1),N=R("添加自定义文档"),f=Z({library_id:d.query.id,doc_type:3,file_name:"",is_qa_doc:0,qa_index_type:1}),F=R([{iconName:"file-search",iconNameActive:"file-search",title:"问题与答案一起生成索引",value:1,desc:"回答用户提问时，将用户提问与导入的问题和答案一起对比相似度，根据相似度高的问题和答案回复"},{iconName:"comment-search",iconNameActive:"comment-search",title:"仅对问题生成索引",value:2,desc:"回答用户提问时，将用户提问与导入的问题一起对比相似度，再根据相似度高的问题和对应的答案来回复"}]),O=T=>{f.qa_index_type=T},k=Z({file_name:[{message:"请输入昵称",required:!0}]}),{resetFields:c,validate:L,validateInfos:P}=p(f,k),y=()=>{I.value=!0,c(),f.file_name="",f.is_qa_doc=0,f.qa_index_type=1},v=R(!1),B=()=>{L().then(()=>{let T={...ue(f)};v.value=!0,_e(T).then(x=>{G.success(`${N.value}成功`),I.value=!1,g.push("/library/preview?id="+x.data.file_ids[0])}).finally(()=>{v.value=!1})})};return S({add:y}),(T,x)=>{const M=$e,U=Pe,n=xt,m=wt,r=Ie,K=me,j=ae;return i(),h("div",null,[e(j,{open:I.value,"onUpdate:open":x[2]||(x[2]=b=>I.value=b),title:N.value,onOk:B,width:"472px",confirmLoading:v.value},{default:t(()=>[l("div",Xt,[e(K,{layout:"vertical"},{default:t(()=>[e(U,mt({label:"文档名称"},X(P).file_name),{default:t(()=>[e(M,{type:"text",placeholder:"请输入文档名称",value:f.file_name,"onUpdate:value":x[0]||(x[0]=b=>f.file_name=b)},null,8,["value"])]),_:1},16),e(U,{label:"文档类型",required:""},{default:t(()=>[e(m,{value:f.is_qa_doc,"onUpdate:value":x[1]||(x[1]=b=>f.is_qa_doc=b)},{default:t(()=>[e(n,{value:0},{default:t(()=>[q("普通文档")]),_:1}),e(n,{value:1},{default:t(()=>[q("QA文档")]),_:1})]),_:1},8,["value"])]),_:1}),f.is_qa_doc==1?(i(),A(U,{key:0,label:"索引方式",required:""},{default:t(()=>[l("div",Yt,[(i(!0),h(J,null,ce(F.value,b=>(i(),h("div",{class:pt(["type-item",{active:f.qa_index_type==b.value}]),key:b.value,onClick:Q=>O(b.value)},[l("div",Jt,[l("div",Qt,[e(r,{name:f.qa_index_type==b.value?b.iconNameActive:b.iconName},null,8,["name"]),l("div",Wt,E(b.title),1)]),l("div",Zt,E(b.desc),1)]),f.qa_index_type==b.value?(i(),A(r,{key:0,class:"check-arrow",name:"check-arrow-filled",style:{"font-size":"24px",color:"#fff"}})):$("",!0)],10,Gt))),128))])]),_:1})):$("",!0)]),_:1})])]),_:1},8,["open","title","confirmLoading"])])}}},to=pe(eo,[["__scopeId","data-v-4f373049"]]),oo=["src"],no={__name:"model-select",props:{modelType:{type:String,validator:o=>["TEXT EMBEDDING","RERAN","LLM"].includes(o),required:!0},isOffline:{type:Boolean,default:!1},modeName:{type:[String,Number],default:""},modeId:{type:[String,Number],default:""},placeholder:{type:String,default:"请选择嵌入模型"}},emits:["change","update:modeName","update:modeId","loaded"],setup(o,{emit:S}){function _(O,k,c){const L=new Set(O.map(P=>P.model_define));return k.filter(P=>{let y=P[c];L.has(y)&&O.filter(v=>{if(v.model_define==y)return v.children=it(v.children,P.children),!1})}),O}const g=S,d=o,p=R();xe([()=>d.modeId,()=>d.modeName],([O,k])=>{!O||!k||(p.value=O+"-"+k)});const I=R([]),N=["azure","ollama","xinference","openaiAgent"],f=(O,k)=>{g("update:modeName",k.modelName),g("update:modeId",k.modelId),g("change",O,k)},F=()=>{St({model_type:d.modelType,is_offline:d.isOffline}).then(O=>{let c=(O.data||[]).map(L=>{let{model_define:P,deployment_name:y,id:v}=L.model_config,B=`${P}-${y||""}-${v}`,T=[],x=[];d.modelType=="TEXT EMBEDDING"?T=L.model_info.vector_model_list:d.modelType=="RERANK"?T=L.model_info.rerank_model_list:d.modelType=="LLM"&&(T=L.model_info.llm_model_list);for(let M=0;M<T.length;M++){let U=T[M],n=U,m=v+"-"+U;N.indexOf(L.model_config.model_define)>-1&&L.model_config.deployment_name&&(n=L.model_config.deployment_name),x.push({key:v+"_"+U,label:n,name:U,deployment_name:y,model_config_id:v,model_define:P,value:m})}return{key:B,model_define:P,children:x,model_config_id:v,deployment_name:y,name:L.model_info.model_name,icon:L.model_info.model_icon_url}});c=_(st(c,"model_define"),c,"model_define"),c.length===0&&(p.value="无可用模型"),I.value=[...c],g("loaded",JSON.parse(JSON.stringify(c)))})};return xe(()=>d.isOffline,()=>{F()}),Te(()=>{F()}),(O,k)=>{const c=qe,L=De,P=Lt,y=Me;return i(),A(y,{value:p.value,"onUpdate:value":k[0]||(k[0]=v=>p.value=v),placeholder:o.placeholder,onChange:f,style:{width:"100%"}},{default:t(()=>[(i(!0),h(J,null,ce(I.value,v=>(i(),A(P,{key:v.key},{label:t(()=>[e(c,{align:"center",gap:6},{default:t(()=>[l("img",{class:"model-icon",src:v.icon,alt:""},null,8,oo),l("span",null,E(v.name),1)]),_:2},1024)]),default:t(()=>[(i(!0),h(J,null,ce(v.children,B=>(i(),A(L,{value:B.value,modelId:B.model_config_id,modelName:B.name,key:B.key},{default:t(()=>[q(E(B.label),1)]),_:2},1032,["value","modelId","modelName"]))),128))]),_:2},1024))),128))]),_:1},8,["value","placeholder"])}}},ao=pe(no,[["__scopeId","data-v-cd9d6bba"]]),Y=o=>(gt("data-v-dbb94254"),o=o(),yt(),o),lo={class:"details-library-page"},so={class:"list-tools"},io={class:"tools-items"},ro={class:"tool-item"},co={class:"dropdown-btn-menu"},uo=Y(()=>l("div",{class:"title"},"本地文档",-1)),_o=Y(()=>l("div",{class:"desc"},"上传本地 text/pdf/doc 等格式文件",-1)),mo={class:"dropdown-btn-menu"},po=Y(()=>l("div",{class:"title"},"在线数据",-1)),fo=Y(()=>l("div",{class:"desc"},"获取在线网页内容",-1)),vo={class:"dropdown-btn-menu"},go=Y(()=>l("div",{class:"title"},"自定义文档",-1)),yo=Y(()=>l("div",{class:"desc"},"自定义一个空文档，手动添加内容",-1)),ho=Y(()=>l("span",null,"添加内容",-1)),ko={class:"tool-item"},bo=Y(()=>l("span",null,"嵌入模型：",-1)),Co={class:"tool-item"},xo={class:"list-content"},wo={key:0,class:"doc-name-td"},So=["onClick"],Lo={key:0},Io={key:1},No={key:0,class:"url-remark"},Oo={key:0,class:"status-tag status-queuing"},To={key:1,class:"status-tag status-learning"},Po={key:2,class:"status-tag status-complete"},$o={class:"status-tag status-error"},qo={class:"status-tag status-complete"},Do=["onClick"],Mo={key:5,class:"status-tag status-complete"},zo={key:6,class:"status-tag status-learning"},Fo={class:"status-tag status-error"},Bo={key:0},Ro={key:1},Uo={key:0},Eo={key:1},Ao=["onClick"],jo=Y(()=>l("span",null,"删除",-1)),Vo={class:"upload-file-box"},Ho={__name:"knowledge-document",setup(o){const S=Oe(),_=Ne(),g=S.query,d=R({library_intro:"",library_name:"",use_model:"",is_offline:null}),p=Z({use_model:"",model_config_id:""}),I=()=>{k.value.length>0?ae.confirm({title:`确定切换模型为${p.use_model}吗？`,content:"切换后，所有学习文档将自动重新学习。",onOk(){N()}}):N()},N=(s=!0)=>{kt({...ue(d.value),use_model:p.use_model,model_config_id:p.model_config_id}).then(()=>{d.value.use_model=p.use_model,d.value.model_config_id=p.model_config_id,s&&G.success("保存成功")})},f=R([]),F=s=>{f.value=s,O()},O=()=>{if(!d.value.id){setTimeout(()=>{O()},100);return}if(f.value.length>0&&!d.value.use_model){let s=f.value[0];if(s){let a=s.children[0];p.use_model=a.name,p.model_config_id=a.model_config_id,N(!1)}}},k=R([]),c=Z({library_id:g.id,file_name:void 0,page:1,size:10,total:0}),L=[{title:"文档名称",dataIndex:"file_name",key:"file_name",width:450},{title:"状态",dataIndex:"status",key:"status",width:"160px"},{title:"文档格式",dataIndex:"file_ext",key:"file_ext",width:"100px"},{title:"文档大小",dataIndex:"file_size_str",key:"file_size",width:"100px"},{title:"分段",dataIndex:"paragraph_count",key:"paragraph_count",width:"120px"},{title:"更新时间",dataIndex:"update_time",key:"update_time",width:"150px"},{title:"操作",dataIndex:"action",key:"action",width:"60px"}],P=s=>{c.page=s.current,c.size=s.pageSize,x()},y=()=>{c.page=1,x()};let v=!1;const B=({id:s})=>{k.value.length==1&&(v=!0),bt({id:s}).then(()=>{v&&c.page>1&&c.page--,x(),G.success("删除成功")})},T=s=>{if(s.status=="4")return _.push({path:"/library/document-segmentation",query:{document_id:s.id}});if(s.status=="3")return G.error("学习失败,不可预览");if(s.status=="0")return G.error("转换中,稍候可预览");if(s.status=="6")return G.error("获取中,不可预览");if(s.status=="7")return G.error("获取失败,不可预览");_.push({name:"libraryPreview",query:{id:s.id}})},x=()=>{ht(ue(c)).then(s=>{let a=s.data.info;!p.use_model&&p.use_model!=a.use_model&&(p.use_model=a.use_model,p.model_config_id=a.model_config_id),d.value={...a};let z=s.data.list||[];c.total=s.data.total;let V=!1;k.value=z.map(D=>(["1","6","0","5","4"].includes(D.status)&&(V=!0),D.file_size_str=dt(D.file_size),D.update_time=rt(D.update_time*1e3).format("YYYY-MM-DD HH:mm"),D)),V&&U(),!V&&clearInterval(M.value)})},M=R(null),U=()=>{clearInterval(M.value),M.value=setInterval(()=>{x()},1e3*5)},n=R(null),m=s=>{if(f.value.length==0){ae.confirm({title:"请先到模型管理中添加嵌入模型？",content:"知识库学习需要使用到嵌入模型，请在系统管理-模型管理中添加。推荐使用通义千问、openai或者火山引擎的嵌入模型。",okText:"去添加",onOk(){_.push({path:"/user/model"})}});return}let{key:a}=s;a==1&&ee(),a==2&&K(),a==3&&n.value.add()},r=Z({open:!1,urls:"",library_id:g.id,doc_auto_renew_frequency:1,confirmLoading:!1,rules:{urls:[{message:"请输入网页地址",required:!0},{validator:(s,a)=>we(a)===!1?Promise.reject(new Error("网页地址不合法")):Promise.resolve()}]}}),K=()=>{r.open=!0,r.confirmLoading=!1,r.urls="",r.doc_auto_renew_frequency=1},j=R(null),b=()=>{j.value.validate().then(()=>{r.confirmLoading=!0,_e({library_id:r.library_id,urls:JSON.stringify(we(r.urls)),doc_auto_renew_frequency:r.doc_auto_renew_frequency,doc_type:2}).then(()=>{r.open=!1,r.confirmLoading=!1,y()})}).catch(()=>{r.confirmLoading=!1})},Q=()=>{r.open=!1},w=Z({open:!1,fileList:[],confirmLoading:!1}),ee=()=>{w.fileList=[],w.open=!0},le=()=>{w.fileList=[]},se=s=>{w.fileList=s},oe=()=>{if(w.fileList.length==0){G.error("请选择文件");return}w.confirmLoading=!0;let s=new FormData;s.append("library_id",c.library_id);let a=!1;w.fileList.forEach(z=>{(z.name.includes(".xlsx")||z.name.includes(".csv"))&&(a=!0),s.append("library_files",z)}),_e(s).then(z=>{x(),w.open=!1,w.fileList=[],w.confirmLoading=!1,a&&_.push("/library/document-segmentation?document_id="+z.data.file_ids[0])}).catch(()=>{w.confirmLoading=!1})};return Te(()=>{x()}),ft(()=>{M.value&&clearInterval(M.value)}),(s,a)=>{const z=Ie,V=qe,D=It,ne=Nt,ze=Le,fe=Ot,Fe=$e,ie=Tt,ve=Dt,Be=Kt,Re=Rt,Ue=Ve,ge=ae,Ee=Ut,ye=Pe,te=De,Ae=Me,je=me;return i(),h("div",lo,[e(Ue,{scrollbar:!1},{default:t(()=>[l("div",so,[l("div",io,[l("div",ro,[e(fe,{trigger:["click"],overlayClassName:"add-dropdown-btn"},{overlay:t(()=>[e(ne,{onClick:m},{default:t(()=>[(i(),A(D,{key:1},{default:t(()=>[l("div",co,[e(V,{class:"title-block",gap:4},{default:t(()=>[e(z,{name:"doc-icon"}),uo]),_:1}),_o])]),_:1})),(i(),A(D,{key:2},{default:t(()=>[l("div",mo,[e(V,{class:"title-block",gap:4},{default:t(()=>[e(z,{name:"link-icon"}),po]),_:1}),fo])]),_:1})),(i(),A(D,{key:3},{default:t(()=>[l("div",vo,[e(V,{class:"title-block",gap:4},{default:t(()=>[e(z,{name:"cu-doc-icon"}),go]),_:1}),yo])]),_:1}))]),_:1})]),default:t(()=>[e(ze,{type:"primary"},{icon:t(()=>[e(X(zt))]),default:t(()=>[ho]),_:1})]),_:1})]),l("div",ko,[bo,e(ao,{modelType:"TEXT EMBEDDING",isOffline:!1,modeName:p.use_model,"onUpdate:modeName":a[0]||(a[0]=C=>p.use_model=C),modeId:p.model_config_id,"onUpdate:modeId":a[1]||(a[1]=C=>p.model_config_id=C),style:{width:"300px"},onChange:I,onLoaded:F},null,8,["modeName","modeId"])])]),l("div",null,[l("div",Co,[e(Fe,{style:{width:"282px"},value:c.file_name,"onUpdate:value":a[2]||(a[2]=C=>c.file_name=C),placeholder:"请输入文档名称搜索",onChange:y},{suffix:t(()=>[e(X(Ft),{onClick:y,style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])])])]),l("div",xo,[e(Re,{columns:L,"data-source":k.value,pagination:{current:c.page,total:c.total,pageSize:c.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]},onChange:P},{bodyCell:t(({column:C,record:u})=>[C.key==="file_name"?(i(),h("div",wo,[l("a",{onClick:de=>T(u)},[["5","6","7"].includes(u.status)?(i(),h("span",Lo,E(u.doc_url),1)):(i(),h("span",Io,E(u.file_name),1))],8,So),u.doc_type==2&&u.remark?(i(),h("div",No," 备注："+E(u.remark),1)):$("",!0)])):$("",!0),C.key==="status"?(i(),h(J,{key:1},[u.status==0?(i(),h("span",Oo,[e(ie,{size:"small"}),q(" 转换中")])):$("",!0),u.status==1?(i(),h("span",To,[e(ie,{size:"small"}),q(" 学习中")])):$("",!0),u.status==2?(i(),h("span",Po,[e(X(ct)),q(" 学习完成")])):$("",!0),u.status==3?(i(),A(ve,{key:3,placement:"top"},{title:t(()=>[l("span",null,E(u.errmsg),1)]),default:t(()=>[l("span",$o,[e(X(be)),q(" 学习失败")])]),_:2},1024)):$("",!0),u.status==4?(i(),h(J,{key:4},[l("span",qo,[e(X(Se)),q(" 待学习")]),l("a",{class:"ml8",onClick:de=>T(u)},"学习",8,Do)],64)):$("",!0),u.status==5?(i(),h("span",Mo,[e(X(Se)),q(" 待获取")])):$("",!0),u.status==6?(i(),h("span",zo,[e(ie,{size:"small"}),q(" 获取中")])):$("",!0),u.status==7?(i(),A(ve,{key:7,placement:"top"},{title:t(()=>[l("span",null,E(u.errmsg),1)]),default:t(()=>[l("span",Fo,[e(X(be)),q(" 获取失败")])]),_:2},1024)):$("",!0)],64)):$("",!0),C.key==="file_size"?(i(),h(J,{key:2},[u.doc_type==3?(i(),h("span",Bo,"-")):(i(),h("span",Ro,E(u.file_size_str),1))],64)):$("",!0),C.key==="paragraph_count"?(i(),h(J,{key:3},[u.status==0||u.status==1?(i(),h("span",Uo,"-")):(i(),h("span",Eo,E(u.paragraph_count),1))],64)):$("",!0),C.key==="action"?(i(),A(fe,{key:4},{overlay:t(()=>[e(ne,null,{default:t(()=>[e(D,{disabled:u.status==6||u.status==7||u.status==0},{default:t(()=>[l("div",{onClick:de=>T(u)},"预览",8,Ao)]),_:2},1032,["disabled"]),e(D,null,{default:t(()=>[e(Be,{title:"确定要删除吗?",onConfirm:de=>B(u)},{default:t(()=>[jo]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:t(()=>[l("div",{class:"table-btn",onClick:a[3]||(a[3]=vt(()=>{},["prevent"]))},[e(X(Bt))])]),_:2},1024)):$("",!0)]),_:1},8,["data-source","pagination"])])]),_:1}),e(ge,{open:w.open,"onUpdate:open":a[5]||(a[5]=C=>w.open=C),"confirm-loading":w.confirmLoading,maskClosable:!1,title:"上传文档",onOk:oe,onCancel:le},{default:t(()=>[l("div",Vo,[e(Ct,{value:w.fileList,"onUpdate:value":a[4]||(a[4]=C=>w.fileList=C),onChange:se},null,8,["value"])])]),_:1},8,["open","confirm-loading"]),e(ge,{open:r.open,"onUpdate:open":a[8]||(a[8]=C=>r.open=C),"confirm-loading":r.confirmLoading,maskClosable:!1,title:"添加在线数据",width:"746px",onOk:b,onCancel:Q},{default:t(()=>[e(je,{class:"url-add-form",layout:"vertical",ref_key:"urlFormRef",ref:j,model:r,rules:r.rules},{default:t(()=>[e(ye,{name:"urls",label:"网页链接"},{default:t(()=>[e(Ee,{style:{height:"120px"},value:r.urls,"onUpdate:value":a[6]||(a[6]=C=>r.urls=C),placeholder:"请输入网页链接,形式：一行标题一行网页链接"},null,8,["value"])]),_:1}),e(ye,{name:"doc_auto_renew_frequency",label:"更新频率",required:""},{default:t(()=>[e(Ae,{value:r.doc_auto_renew_frequency,"onUpdate:value":a[7]||(a[7]=C=>r.doc_auto_renew_frequency=C),style:{width:"100%"}},{default:t(()=>[e(te,{value:1},{default:t(()=>[q("不自动更新")]),_:1}),e(te,{value:2},{default:t(()=>[q("每天")]),_:1}),e(te,{value:3},{default:t(()=>[q("每3天")]),_:1}),e(te,{value:4},{default:t(()=>[q("每7天")]),_:1}),e(te,{value:5},{default:t(()=>[q("每30天")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["open","confirm-loading"]),e(to,{onOk:y,ref_key:"addCustomDocumentRef",ref:n},null,512)])}}},Gn=pe(Ho,[["__scopeId","data-v-dbb94254"]]);export{Gn as default};
