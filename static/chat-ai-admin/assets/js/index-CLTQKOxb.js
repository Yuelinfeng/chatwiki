import{a0 as E,b as h,w as z,a5 as T,L as a,M as c,V as s,F as $,a1 as N,a2 as q,j as t,Q as u,X as C,Y as g,P as S,r as I,v as H,B as K,u as w,a6 as Q,a7 as W,a8 as L,A as F,U,a9 as X,S as Y,W as D}from"./vue-chunks-CX0PHdkT.js";import{L as G,a as J}from"./locale-dropdown-DpQWcing.js";import{_ as k,d as Z,a as P,b as ee,R as te,c as oe,r as se,e as ae,M as re}from"../../index-CstSXCdU.js";import{_ as ne,B as le}from"./index-B1DDV-R2.js";import{_ as ie,M as ce}from"./index-CPSClIuB.js";import"./index-dl1p0SLK.js";import{D as ue}from"./dropdown-ncLr3TGE.js";import{v as _e}from"./validate-8MtiUsxW.js";import{F as j,_ as de}from"./index-L1GceNF2.js";import{_ as pe}from"./index-BxOFKC0L.js";import{_ as me}from"./Password-BPL4Bd2T.js";import"./index-mgtqK7H6.js";import"./axios-Cm0UX6qg.js";import"./qs-D52wVmk8.js";import"./crypto-js-ZYyBUTQg.js";import"./dayjs-DItM2b4N.js";import"./DownOutlined-DGhSUoaY.js";import"./shallowequal-BtoafKsn.js";import"./colors-C2VfdtVY.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./collapseMotion-7Vnsd4b5.js";import"./slide-C2DT8m2K.js";import"./index-v-hTEyV7.js";import"./index-bwfsT3yL.js";import"./Dropdown-BXle2wjv.js";import"./RightOutlined-CGdQ7_SL.js";import"./move-7f3qAgDa.js";import"./isPlainObject-DadmzF58.js";import"./responsiveObserve-S5D8rlR7.js";import"./QuestionCircleOutlined-DWuvpisG.js";import"./FormItemContext-BHAiblOr.js";import"./Input-CCZkwFQT.js";import"./statusUtils-DAHCu8QH.js";import"./inputProps-BGPPkc5V.js";import"./index-BHTxBMxE.js";import"./Search-DdoCxxLO.js";import"./SearchOutlined-CTCDQEDm.js";import"./TextArea-tZiQ0s1q.js";const ve={class:"navbar-wrapper"},fe={class:"navbar"},he={__name:"layout-navbar",setup(b){const e=E(),i=h(()=>e.meta.activeMenu||""),_=h(()=>e.path.split("/")[1]),d=Z(),v=h(()=>{const r=["ModelManage","TokenManage","TeamManage","AccountManage","CompanyManage","ClientSideManage"];let n=!1,{role_permission:f}=d,o=[];for(let l=0;l<f.length;l++){const p=f[l];if(p==="RobotManage"&&o.push({id:1,key:"robot",label:"robot",title:"应用",path:"/robot/list"}),p==="LibraryManage"&&o.push({id:2,key:"library",label:"library",title:"知识库",path:"/library/list"}),p==="OpenDoc"&&o.push({id:3,key:"PublicLibrary",label:"PublicLibrary",title:"对外文档",path:"/public-library/list"}),p==="FormManage"&&o.push({id:4,key:"database",label:"database",title:"数据库",path:"/database/list"}),!n){for(let y=0;y<r.length;y++)if(r[y]===p){o.push({id:5,key:"user",label:"user",title:"系统管理",path:"/user/model"}),n=!0;break}}}return o.sort((l,p)=>l.id-p.id)});return z(()=>e.path,()=>{},{immediate:!0}),(r,n)=>{const f=T("router-link");return a(),c("div",ve,[s("div",fe,[(a(!0),c($,null,N(v.value,o=>(a(),c("div",{class:q(["nav-menu",{active:o.key===_.value||o.key===i.value}]),key:o.key},[t(f,{to:o.path,class:"nav-menu-name"},{default:u(()=>[C(g(o.title),1)]),_:2},1032,["to"])],2))),128))])])}}},ye=k(he,[["__scopeId","data-v-d0fd8673"]]),be={class:"layout-breadcrumb"},ge={key:1,class:"page-title"},we={__name:"layout-breadcrumb",props:{title:{type:[String,Boolean],default:""},items:{type:[Array,Boolean],default:()=>[]}},setup(b){const e=b;return(i,_)=>{const d=T("router-link"),v=ne,r=le;return a(),c("div",be,[e.items.length>0?(a(),S(r,{key:0},{default:u(()=>[(a(!0),c($,null,N(e.items,(n,f)=>(a(),c($,{key:n.title},[f!==e.items.length-1?(a(),S(v,{key:0},{default:u(()=>[t(d,{to:n.path},{default:u(()=>[C(g(n.title),1)]),_:2},1032,["to"])]),_:2},1024)):(a(),S(v,{key:1},{default:u(()=>[C(g(n.title),1)]),_:2},1024))],64))),128))]),_:1})):(a(),c("div",ge,g(e.title),1))])}}},ke=k(we,[["__scopeId","data-v-c69a461d"]]),Me={class:"layout-footer"},xe={class:"copyright-text"},Se={__name:"layout-footer",setup(b){const e=P(),{t:i}=ee(),_=I(null);return H(()=>{_.value=setInterval(()=>{setTimeout(()=>{e.refreshToken()},0)},te)}),K(()=>{clearInterval(_.value),_.value=null}),(d,v)=>(a(),c("div",Me,[s("div",xe,g(w(i)("common.copyright")),1)]))}},Pe=k(Se,[["__scopeId","data-v-ca41b2c2"]]),$e={key:0,class:"user-dropdown"},Ce=["src"],Ie={class:"user-name"},Le={__name:"user-dropdown",setup(b){const e=P(),{userInfo:i,avatar:_,user_name:d}=Q(e),v=()=>{e.logoutConfirm(!0)};return(r,n)=>{const f=oe,o=ie,l=ce,p=ue;return w(i)?(a(),c("div",$e,[t(p,null,{overlay:u(()=>[t(l,null,{default:u(()=>[t(o,null,{default:u(()=>[s("a",{href:"javascript:;",onClick:v},"退出登录")]),_:1})]),_:1})]),default:u(()=>[s("div",{class:"user-dropdown-link",onClick:n[0]||(n[0]=W(()=>{},["prevent"]))},[s("img",{class:"user-avatar",src:w(_),alt:""},null,8,Ce),s("span",Ie,g(w(d)),1),t(f,{name:"arrow-down",style:{"font-size":"16px",color:"#8c8c8c"}})])]),_:1})])):L("",!0)}}},Te=k(Le,[["__scopeId","data-v-54b296b2"]]),Re={class:"form-box"},Be={__name:"reset-password",setup(b,{expose:e}){const i=P(),_=j.useForm,d=I(!0),v=I("重置登录密码"),r=F({password:"",check_password:"",id:i.userInfo.user_id}),n=F({password:[{message:"请输入登录密码",required:!0},{validator:async(x,m)=>!_e(m)&&m?Promise.reject("密码必须包含字母、数字或者字符中的两种，6-32位"):Promise.resolve()}],check_password:[{message:"请输入确认密码",required:!0},{validator:async(x,m)=>m!=r.password&&m?Promise.reject("两次输入的密码不一致"):Promise.resolve()}]}),{resetFields:f,validate:o,validateInfos:l}=_(r,n),p=()=>{o().then(()=>{se({...X(r)}).then(x=>{ae.success("修改成功"),d.value=!1,i.reset(!0)})})},y=()=>{i.setResetPassModal()};return e({open}),(x,m)=>{const O=pe,R=me,B=de,V=j,A=re;return a(),c("div",null,[t(A,{open:d.value,"onUpdate:open":m[2]||(m[2]=M=>d.value=M),title:v.value,onOk:p,width:"520px",onCancel:y},{default:u(()=>[t(O,{class:"alert-box",message:"您还未修改初始密码，为了保障您的数据安全，请您尽快重置密码。",type:"info","show-icon":""}),s("div",Re,[t(V,{layout:"vertical"},{default:u(()=>[t(B,U({label:"登录密码"},w(l).password),{default:u(()=>[t(R,{value:r.password,"onUpdate:value":m[0]||(m[0]=M=>r.password=M),placeholder:"密码必须包含字母、数字或者字符中的两种，6-32位"},null,8,["value"])]),_:1},16),t(B,U({label:"确认密码"},w(l).check_password),{default:u(()=>[t(R,{value:r.check_password,"onUpdate:value":m[1]||(m[1]=M=>r.check_password=M),placeholder:"请重新输入密码"},null,8,["value"])]),_:1},16)]),_:1})])]),_:1},8,["open","title"])])}}},Fe=k(Be,[["__scopeId","data-v-40aed5c2"]]),Ue={class:"admin-layout"},De={class:"layout-header-wrapper"},je={class:"layout-header"},Ee={class:"header-left"},Ne={class:"header-body"},Oe={class:"header-right"},Ve={class:"item-box"},Ae={class:"item-box"},ze={class:"layout-body"},qe={key:0,class:"layout-breadcrumb-wrapper"},He={class:"layout-footer-wrapper"},Ke={__name:"index",setup(b){const e=E(),i=P(),_=h(()=>e.meta.isCustomPage||!1),d=h(()=>e.meta.pageStyle||{}),v=h(()=>e.meta.bgColor||"#ffffff"),r=h(()=>e.meta.breadcrumb||[]),n=h(()=>e.meta.hideTitle||!1),f=h(()=>e.meta.title||!1),o=h(()=>{var l;return((l=i.userInfo)==null?void 0:l.d_pass)==1&&i.isShowResetPassModal});return(l,p)=>{const y=T("router-view");return a(),c("div",Ue,[s("div",De,[s("div",je,[s("div",Ee,[t(G)]),s("div",Ne,[t(ye)]),s("div",Oe,[s("div",Ve,[t(J)]),s("div",Ae,[t(Te)])])])]),s("div",ze,[_.value?Y(l.$slots,"default",{key:0},()=>[t(y)],!0):(a(),c("div",{key:1,class:"page-wrapper",style:D({"background-color":v.value})},[n.value?L("",!0):(a(),c("div",qe,[t(ke,{items:r.value,title:f.value},null,8,["items","title"])])),s("div",{class:"page-container",style:D({...d.value})},[t(y)],4)],4))]),s("div",He,[t(Pe)]),o.value?(a(),S(Fe,{key:0})):L("",!0)])}}},Tt=k(Ke,[["__scopeId","data-v-136c0a2a"]]);export{Tt as default};
