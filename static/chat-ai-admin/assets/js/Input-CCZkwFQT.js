import{aC as Q,aQ as S,aF as E,aH as J,aA as D,aN as xe,aO as ge,aP as Ce,S as he,bn as le}from"../../index-CstSXCdU.js";import{u as be,F as we,N as te}from"./FormItemContext-BHAiblOr.js";import{b as ye,g as $e,a as q}from"./statusUtils-DAHCu8QH.js";import{b as Ie,h as Y,a as H,i as _e,f as oe,t as Ne,r as ne,c as Se}from"./inputProps-BGPPkc5V.js";import{e as Z,r as X,j as f,s as U,w as se,v as ie,E as Oe,F as de,y as re,b as ue,aj as Ae,o as Be}from"./vue-chunks-CX0PHdkT.js";import{u as Fe}from"./index-BHTxBMxE.js";const Pe=Z({name:"BaseInput",inheritAttrs:!1,props:Ie(),setup(a,$){let{slots:l,attrs:o}=$;const i=X(),h=c=>{var r;if(!((r=i.value)===null||r===void 0)&&r.contains(c.target)){const{triggerFocus:g}=a;g==null||g()}},u=()=>{var c;const{allowClear:r,value:g,disabled:x,readonly:A,handleReset:B,suffix:R=l.suffix,prefixCls:I}=a;if(!r)return null;const b=!x&&!A&&g,v=`${I}-clear-icon`,_=((c=l.clearIcon)===null||c===void 0?void 0:c.call(l))||"*";return f("span",{onClick:B,onMousedown:C=>C.preventDefault(),class:S({[`${v}-hidden`]:!b,[`${v}-has-suffix`]:!!R},v),role:"button",tabindex:-1},[_])};return()=>{var c,r;const{focused:g,value:x,disabled:A,allowClear:B,readonly:R,hidden:I,prefixCls:b,prefix:v=(c=l.prefix)===null||c===void 0?void 0:c.call(l),suffix:_=(r=l.suffix)===null||r===void 0?void 0:r.call(l),addonAfter:C=l.addonAfter,addonBefore:O=l.addonBefore,inputElement:z,affixWrapperClassName:k,wrapperClassName:T,groupClassName:e}=a;let s=Q(z,{value:x,hidden:I});if(Y({prefix:v,suffix:_,allowClear:B})){const n=`${b}-affix-wrapper`,d=S(n,{[`${n}-disabled`]:A,[`${n}-focused`]:g,[`${n}-readonly`]:R,[`${n}-input-with-clear-btn`]:_&&B&&x},!H({addonAfter:C,addonBefore:O})&&o.class,k),N=(_||B)&&f("span",{class:`${b}-suffix`},[u(),_]);s=f("span",{class:d,style:o.style,hidden:!H({addonAfter:C,addonBefore:O})&&I,onMousedown:h,ref:i},[v&&f("span",{class:`${b}-prefix`},[v]),Q(z,{style:null,value:x,hidden:null}),N])}if(H({addonAfter:C,addonBefore:O})){const n=`${b}-group`,d=`${n}-addon`,N=S(`${b}-wrapper`,n,T),F=S(`${b}-group-wrapper`,o.class,e);return f("span",{class:F,style:o.style,hidden:I},[f("span",{class:N},[O&&f("span",{class:d},[O]),Q(s,{style:null,hidden:null}),C&&f("span",{class:d},[C])])])}return s}}});var je=function(a,$){var l={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&$.indexOf(o)<0&&(l[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(a);i<o.length;i++)$.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(a,o[i])&&(l[o[i]]=a[o[i]]);return l};const Re=Z({name:"VCInput",inheritAttrs:!1,props:_e(),setup(a,$){let{slots:l,attrs:o,expose:i,emit:h}=$;const u=U(a.value===void 0?a.defaultValue:a.value),c=U(!1),r=U(),g=U();se(()=>a.value,()=>{u.value=a.value}),se(()=>a.disabled,()=>{a.disabled&&(c.value=!1)});const x=e=>{r.value&&Ne(r.value,e)};i({focus:x,blur:()=>{var e;(e=r.value)===null||e===void 0||e.blur()},input:r,stateValue:u,setSelectionRange:(e,s,n)=>{var d;(d=r.value)===null||d===void 0||d.setSelectionRange(e,s,n)},select:()=>{var e;(e=r.value)===null||e===void 0||e.select()}});const I=e=>{h("change",e)},b=(e,s)=>{u.value!==e&&(a.value===void 0?u.value=e:re(()=>{var n;r.value.value!==u.value&&((n=g.value)===null||n===void 0||n.$forceUpdate())}),re(()=>{s&&s()}))},v=e=>{const{value:s,composing:n}=e.target;if((e.isComposing||n)&&a.lazy||u.value===s)return;const d=e.target.value;ne(r.value,e,I),b(d)},_=e=>{e.keyCode===13&&h("pressEnter",e),h("keydown",e)},C=e=>{c.value=!0,h("focus",e)},O=e=>{c.value=!1,h("blur",e)},z=e=>{ne(r.value,e,I),b("",()=>{x()})},k=()=>{var e,s;const{addonBefore:n=l.addonBefore,addonAfter:d=l.addonAfter,disabled:N,valueModifiers:F={},htmlSize:t,autocomplete:p,prefixCls:y,inputClassName:w,prefix:V=(e=l.prefix)===null||e===void 0?void 0:e.call(l),suffix:M=(s=l.suffix)===null||s===void 0?void 0:s.call(l),allowClear:P,type:K="text"}=a,L=J(a,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","size","bordered","htmlSize","lazy","showCount","valueModifiers","showCount","affixWrapperClassName","groupClassName","inputClassName","wrapperClassName"]),j=D(D(D({},L),o),{autocomplete:p,onChange:v,onInput:v,onFocus:C,onBlur:O,onKeydown:_,class:S(y,{[`${y}-disabled`]:N},w,!H({addonAfter:d,addonBefore:n})&&!Y({prefix:V,suffix:M,allowClear:P})&&o.class),ref:r,key:"ant-input",size:t,type:K});F.lazy&&delete j.onInput,j.autofocus||delete j.autofocus;const W=f("input",J(j,["size"]),null);return Oe(W,[[ye]])},T=()=>{var e;const{maxlength:s,suffix:n=(e=l.suffix)===null||e===void 0?void 0:e.call(l),showCount:d,prefixCls:N}=a,F=Number(s)>0;if(n||d){const t=[...oe(u.value)].length,p=typeof d=="object"?d.formatter({count:t,maxlength:s}):`${t}${F?` / ${s}`:""}`;return f(de,null,[!!d&&f("span",{class:S(`${N}-show-count-suffix`,{[`${N}-show-count-has-suffix`]:!!n})},[p]),n])}return null};return ie(()=>{}),()=>{const{prefixCls:e,disabled:s}=a,n=je(a,["prefixCls","disabled"]);return f(Pe,E(E(E({},n),o),{},{ref:g,prefixCls:e,inputElement:k(),handleReset:z,value:oe(u.value),focused:c.value,triggerFocus:x,suffix:T(),disabled:s}),l)}}});var Ee=function(a,$){var l={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&$.indexOf(o)<0&&(l[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(a);i<o.length;i++)$.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(a,o[i])&&(l[o[i]]=a[o[i]]);return l};const We=Z({compatConfig:{MODE:3},name:"AInput",inheritAttrs:!1,props:Se(),setup(a,$){let{slots:l,attrs:o,expose:i,emit:h}=$;const u=X(),c=be(),r=we.useInject(),g=ue(()=>$e(r.status,a.status)),{direction:x,prefixCls:A,size:B,autocomplete:R}=xe("input",a),{compactSize:I,compactItemClassnames:b}=ge(A,x),v=ue(()=>I.value||B.value),[_,C]=Fe(A),O=Ce();i({focus:t=>{var p;(p=u.value)===null||p===void 0||p.focus(t)},blur:()=>{var t;(t=u.value)===null||t===void 0||t.blur()},input:u,setSelectionRange:(t,p,y)=>{var w;(w=u.value)===null||w===void 0||w.setSelectionRange(t,p,y)},select:()=>{var t;(t=u.value)===null||t===void 0||t.select()}});const s=X([]),n=()=>{s.value.push(setTimeout(()=>{var t,p,y,w;!((t=u.value)===null||t===void 0)&&t.input&&((p=u.value)===null||p===void 0?void 0:p.input.getAttribute("type"))==="password"&&(!((y=u.value)===null||y===void 0)&&y.input.hasAttribute("value"))&&((w=u.value)===null||w===void 0||w.input.removeAttribute("value"))}))};ie(()=>{n()}),Ae(()=>{s.value.forEach(t=>clearTimeout(t))}),Be(()=>{s.value.forEach(t=>clearTimeout(t))});const d=t=>{n(),h("blur",t),c.onFieldBlur()},N=t=>{n(),h("focus",t)},F=t=>{h("update:value",t.target.value),h("change",t),h("input",t),c.onFieldChange()};return()=>{var t,p,y,w,V,M;const{hasFeedback:P,feedbackIcon:K}=r,{allowClear:L,bordered:j=!0,prefix:W=(t=l.prefix)===null||t===void 0?void 0:t.call(l),suffix:G=(p=l.suffix)===null||p===void 0?void 0:p.call(l),addonAfter:ee=(y=l.addonAfter)===null||y===void 0?void 0:y.call(l),addonBefore:ae=(w=l.addonBefore)===null||w===void 0?void 0:w.call(l),id:fe=(V=c.id)===null||V===void 0?void 0:V.value}=a,ce=Ee(a,["allowClear","bordered","prefix","suffix","addonAfter","addonBefore","id"]),ve=(P||G)&&f(de,null,[G,P&&K]),m=A.value,pe=Y({prefix:W,suffix:G})||!!P,me=l.clearIcon||(()=>f(he,null,null));return _(f(Re,E(E(E({},o),J(ce,["onUpdate:value","onChange","onInput"])),{},{onChange:F,id:fe,disabled:(M=a.disabled)!==null&&M!==void 0?M:O.value,ref:u,prefixCls:m,autocomplete:R.value,onBlur:d,onFocus:N,prefix:W,suffix:ve,allowClear:L,addonAfter:ee&&f(le,null,{default:()=>[f(te,null,{default:()=>[ee]})]}),addonBefore:ae&&f(le,null,{default:()=>[f(te,null,{default:()=>[ae]})]}),class:[o.class,b.value],inputClassName:S({[`${m}-sm`]:v.value==="small",[`${m}-lg`]:v.value==="large",[`${m}-rtl`]:x.value==="rtl",[`${m}-borderless`]:!j},!pe&&q(m,g.value),C.value),affixWrapperClassName:S({[`${m}-affix-wrapper-sm`]:v.value==="small",[`${m}-affix-wrapper-lg`]:v.value==="large",[`${m}-affix-wrapper-rtl`]:x.value==="rtl",[`${m}-affix-wrapper-borderless`]:!j},q(`${m}-affix-wrapper`,g.value,P),C.value),wrapperClassName:S({[`${m}-group-rtl`]:x.value==="rtl"},C.value),groupClassName:S({[`${m}-group-wrapper-sm`]:v.value==="small",[`${m}-group-wrapper-lg`]:v.value==="large",[`${m}-group-wrapper-rtl`]:x.value==="rtl"},q(`${m}-group-wrapper`,g.value,P),C.value)}),D(D({},l),{clearIcon:me})))}}});export{We as I};
