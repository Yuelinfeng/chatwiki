import{a3 as N,a4 as E,b as v,w as K,L as a,M as c,V as t,F as C,_ as V,u as f,a5 as Q,j as e,Y as w,a6 as I,a7 as D,P as S,Q as i,X as T,r as M,v as W,B as X,a8 as Y,$ as G,a0 as J,a1 as Z,A as B,U as F,a9 as ee,S as te,W as U}from"./vue-chunks-Be7x44a8.js";import{b as g,j as oe,d as O,f as P,h as se,R as ae,r as re,k as ne,M as ce}from"../../index-DrRzkLrM.js";import{L as le}from"./layout-logo-iee1J2BX.js";import{_ as ie,B as ue}from"./index-BPG7X7Q8.js";import{_ as _e,M as pe}from"./index-KF-GLyjX.js";import"./index-DXP5TvMW.js";import{D as de}from"./dropdown-PWgKI0m8.js";import{v as me}from"./validate-8MtiUsxW.js";import{F as j,_ as ve}from"./index-DiumbRRT.js";import{_ as he}from"./index-Dq7pg9aM.js";import{_ as fe}from"./Password-B58O6Jw3.js";import"./index-CA_jlLpR.js";import"./axios-Cm0UX6qg.js";import"./qs-DBZYvUeR.js";import"./crypto-js-5KTNdlTg.js";import"./dayjs-B2GD4xRt.js";import"./DownOutlined-Cp0vVtPD.js";import"./shallowequal-COOgl3QP.js";import"./Trigger-QcvDPnyC.js";import"./collapseMotion-D9n-d2nt.js";import"./slide-C3j77thT.js";import"./index-BFFBEz-T.js";import"./index-oRdc9kyy.js";import"./colors-CGmsXzSB.js";import"./Dropdown-y3DQiBjQ.js";import"./RightOutlined-DqgahkKm.js";import"./move-D51iXHK1.js";import"./isPlainObject-BILoaqPQ.js";import"./responsiveObserve-Ca0NCZ8D.js";import"./QuestionCircleOutlined-C1VUeDko.js";import"./FormItemContext-DlzjcwaL.js";import"./Input-BoEXW7Ed.js";import"./statusUtils-BM8Tk6m7.js";import"./inputProps-D4I2pN7C.js";import"./index-DtPUy1JV.js";import"./Search-Bp_yeyzm.js";import"./SearchOutlined-CH2PxTj7.js";import"./TextArea-CnprCuXF.js";const ye={class:"navbar-wrapper"},be={class:"navbar"},ke=["onClick"],we={class:"nav-name"},ge={__name:"layout-navbar",setup(m){const o=N(),r=E(),u=v(()=>r.meta.activeMenu||""),_=v(()=>r.path.split("/")[1]),d=[{id:1,key:"robot",label:"robot",title:"应用",icon:"nav-robot",path:"/robot/list",permission:["RobotManage"]},{id:2,key:"library",label:"library",title:"知识库",icon:"nav-library",path:"/library/list",permission:["LibraryManage"]},{id:3,key:"PublicLibrary",label:"PublicLibrary",title:"文档",icon:"nav-doc",path:"/public-library/list",permission:["*:*:*"]},{id:5,key:"chat-monitor",label:"chat-monitor",title:"会话",icon:"nav-chat",path:"/chat-monitor/index",permission:["*:*:*"]}],n=l=>{o.push(l.path)};return K(()=>r.path,()=>{},{immediate:!0}),(l,y)=>{const h=O;return a(),c("div",ye,[t("div",be,[(a(),c(C,null,V(d,s=>(a(),c(C,null,[f(oe)(s.permission)?(a(),c("div",{class:Q(["nav-menu",{active:s.key===_.value||s.key===u.value}]),key:s.key,onClick:b=>n(s)},[e(h,{class:"nav-icon",name:s.icon},null,8,["name"]),t("span",we,w(s.title),1)],10,ke)):I("",!0)],64))),64))])])}}},$e=g(ge,[["__scopeId","data-v-fab67bc0"]]),xe={class:"layout-breadcrumb"},Se={key:1,class:"page-title"},Ce={__name:"layout-breadcrumb",props:{title:{type:[String,Boolean],default:""},items:{type:[Array,Boolean],default:()=>[]}},setup(m){const o=m;return(r,u)=>{const _=D("router-link"),d=ie,n=ue;return a(),c("div",xe,[o.items.length>0?(a(),S(n,{key:0},{default:i(()=>[(a(!0),c(C,null,V(o.items,(l,y)=>(a(),c(C,{key:l.title},[y!==o.items.length-1?(a(),S(d,{key:0},{default:i(()=>[e(_,{to:l.path},{default:i(()=>[T(w(l.title),1)]),_:2},1032,["to"])]),_:2},1024)):(a(),S(d,{key:1},{default:i(()=>[T(w(l.title),1)]),_:2},1024))],64))),128))]),_:1})):(a(),c("div",Se,w(o.title),1))])}}},Ie=g(Ce,[["__scopeId","data-v-c69a461d"]]),Pe={class:"layout-footer"},Me={class:"copyright-text"},Re={__name:"layout-footer",setup(m){const o=P(),{t:r}=se(),u=M(null);return W(()=>{u.value=setInterval(()=>{setTimeout(()=>{o.refreshToken()},0)},ae)}),X(()=>{clearInterval(u.value),u.value=null}),(_,d)=>(a(),c("div",Pe,[t("div",Me,w(f(r)("common.copyright")),1)]))}},Le=g(Re,[["__scopeId","data-v-ab337acb"]]),z=m=>(J("data-v-df3efbc7"),m=m(),Z(),m),Te={key:0,class:"user-dropdown"},Be=["src"],Fe={class:"user-name"},Ue=z(()=>t("span",{class:"menu-name"},"系统管理",-1)),je=z(()=>t("span",{class:"menu-name"},"退出登录",-1)),Ne={__name:"user-dropdown",setup(m){const o=N(),r=P(),{userInfo:u,avatar:_,user_name:d}=Y(r),n=()=>{r.logoutConfirm(!0)},l=()=>{o.push({path:"/user/model"})};return(y,h)=>{const s=O,b=_e,k=pe,$=de;return f(u)?(a(),c("div",Te,[e($,null,{overlay:i(()=>[e(k,null,{default:i(()=>[e(b,null,{default:i(()=>[t("a",{class:"menu-item",href:"javascript:;",onClick:l},[e(s,{class:"menu-icon",name:"system-setting"}),Ue])]),_:1}),e(b,null,{default:i(()=>[t("a",{class:"menu-item",href:"javascript:;",onClick:n},[e(s,{class:"menu-icon",name:"logout"}),je])]),_:1})]),_:1})]),default:i(()=>[t("div",{class:"user-dropdown-link",onClick:h[0]||(h[0]=G(()=>{},["prevent"]))},[t("img",{class:"user-avatar",src:f(_),alt:""},null,8,Be),t("span",Fe,w(f(d)),1),e(s,{name:"arrow-down",style:{"font-size":"16px",color:"#8c8c8c"}})])]),_:1})])):I("",!0)}}},Ee=g(Ne,[["__scopeId","data-v-df3efbc7"]]),Ve={class:"form-box"},De={__name:"reset-password",setup(m,{expose:o}){const r=P(),u=j.useForm,_=M(!0),d=M("重置登录密码"),n=B({password:"",check_password:"",id:r.userInfo.user_id}),l=B({password:[{message:"请输入登录密码",required:!0},{validator:async($,p)=>!me(p)&&p?Promise.reject("密码必须包含字母、数字或者字符中的两种，6-32位"):Promise.resolve()}],check_password:[{message:"请输入确认密码",required:!0},{validator:async($,p)=>p!=n.password&&p?Promise.reject("两次输入的密码不一致"):Promise.resolve()}]}),{resetFields:y,validate:h,validateInfos:s}=u(n,l),b=()=>{h().then(()=>{re({...ee(n)}).then($=>{ne.success("修改成功"),_.value=!1,r.reset(!0)})})},k=()=>{r.setResetPassModal()};return o({open}),($,p)=>{const q=he,R=fe,L=ve,A=j,H=ce;return a(),c("div",null,[e(H,{open:_.value,"onUpdate:open":p[2]||(p[2]=x=>_.value=x),title:d.value,onOk:b,width:"520px",onCancel:k},{default:i(()=>[e(q,{class:"alert-box",message:"您还未修改初始密码，为了保障您的数据安全，请您尽快重置密码。",type:"info","show-icon":""}),t("div",Ve,[e(A,{layout:"vertical"},{default:i(()=>[e(L,F({label:"登录密码"},f(s).password),{default:i(()=>[e(R,{value:n.password,"onUpdate:value":p[0]||(p[0]=x=>n.password=x),placeholder:"密码必须包含字母、数字或者字符中的两种，6-32位"},null,8,["value"])]),_:1},16),e(L,F({label:"确认密码"},f(s).check_password),{default:i(()=>[e(R,{value:n.check_password,"onUpdate:value":p[1]||(p[1]=x=>n.check_password=x),placeholder:"请重新输入密码"},null,8,["value"])]),_:1},16)]),_:1})])]),_:1},8,["open","title"])])}}},Oe=g(De,[["__scopeId","data-v-9de4c189"]]),ze={class:"admin-layout"},qe={class:"layout-header-wrapper"},Ae={class:"layout-header"},He={class:"header-left"},Ke={class:"header-body"},Qe={class:"header-right"},We={class:"item-box"},Xe={class:"layout-body"},Ye={key:0,class:"layout-breadcrumb-wrapper"},Ge={class:"layout-footer-wrapper"},Je={__name:"index",setup(m){const o=E(),r=P(),u=v(()=>o.meta.isCustomPage||!1),_=v(()=>o.meta.pageStyle||{}),d=v(()=>o.meta.bgColor||"#ffffff"),n=v(()=>o.meta.breadcrumb||[]),l=v(()=>o.meta.hideTitle||!1),y=v(()=>o.meta.title||!1),h=v(()=>{var s;return((s=r.userInfo)==null?void 0:s.d_pass)==1&&r.isShowResetPassModal});return(s,b)=>{const k=D("router-view");return a(),c("div",ze,[t("div",qe,[t("div",Ae,[t("div",He,[e(le)]),t("div",Ke,[e($e)]),t("div",Qe,[t("div",We,[e(Ee)])])])]),t("div",Xe,[u.value?te(s.$slots,"default",{key:0},()=>[e(k)],!0):(a(),c("div",{key:1,class:"page-wrapper",style:U({"background-color":d.value})},[l.value?I("",!0):(a(),c("div",Ye,[e(Ie,{items:n.value,title:y.value},null,8,["items","title"])])),t("div",{class:"page-container",style:U({..._.value})},[e(k)],4)],4))]),t("div",Ge,[e(Le)]),h.value?(a(),S(Oe,{key:0})):I("",!0)])}}},Nt=g(Je,[["__scopeId","data-v-9ab7d68c"]]);export{Nt as default};
