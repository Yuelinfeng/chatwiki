import{B as u,M as T,S as M,P as B}from"./pull-up.esm-JZ91zQ8P.js";import{_}from"../../index-BNfL3w2j.js";import{r as P,v as S,y as E,L as H,M as x,V as D,S as C,a2 as L}from"./vue-chunks-C0QQWOCx.js";/*!
 * better-scroll / observe-dom
 * (c) 2016-2023 ustbhuangyi
 * Released under the MIT License.
 */var h=typeof window<"u",d=h&&navigator.userAgent.toLowerCase();d&&d.indexOf("android")>0;(function(){if(typeof d=="string"){var t=/os (\d\d?_\d(_\d)?)/,e=t.exec(d);if(!e)return!1;var r=e[1].split("_").map(function(o){return parseInt(o,10)});return r[0]===13&&r[1]>=4}return!1})();var U=!1;if(h){var R="test-passive";try{var b={};Object.defineProperty(b,"passive",{get:function(){U=!0}}),window.addEventListener(R,function(){},b)}catch{}}var y=h&&document.createElement("div").style,f=function(){if(!h)return!1;for(var t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,r=t;e<r.length;e++){var o=r[e];if(y[o.value]!==void 0)return o.key}return!1}();function i(t){return f===!1?t:f==="standard"?t==="transitionEnd"?"transitionend":t:f+t.charAt(0).toUpperCase()+t.substr(1)}f&&f!=="standard"&&""+f.toLowerCase();var F=i("transform"),N=i("transition");h&&i("perspective")in y;i("transitionTimingFunction"),i("transitionDuration"),i("transitionDelay"),i("transformOrigin"),i("transitionEnd"),i("transitionProperty");function m(t){if(t instanceof window.SVGElement){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}else return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var X=function(){function t(e){this.scroll=e,this.stopObserver=!1,this.init()}return t.prototype.init=function(){this.handleMutationObserver(),this.handleHooks()},t.prototype.handleMutationObserver=function(){var e=this;if(typeof MutationObserver<"u"){var r=0;this.observer=new MutationObserver(function(o){e.mutationObserverHandler(o,r)}),this.startObserve(this.observer)}else this.checkDOMUpdate()},t.prototype.handleHooks=function(){var e=this;this.hooksFn=[],this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,function(){e.stopObserve(),e.handleMutationObserver()}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.enable,function(){e.stopObserver&&e.handleMutationObserver()}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.disable,function(){e.stopObserve()}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.destroy,function(){e.destroy()})},t.prototype.mutationObserverHandler=function(e,r){var o=this;if(!this.shouldNotRefresh()){for(var s=!1,a=!1,n=0;n<e.length;n++){var l=e[n];if(l.type!=="attributes"){s=!0;break}else if(l.target!==this.scroll.scroller.content){a=!0;break}}s?this.scroll.refresh():a&&(clearTimeout(r),r=window.setTimeout(function(){o.shouldNotRefresh()||o.scroll.refresh()},60))}},t.prototype.startObserve=function(e){var r={attributes:!0,childList:!0,subtree:!0};e.observe(this.scroll.scroller.content,r)},t.prototype.shouldNotRefresh=function(){var e=this.scroll.scroller,r=e.scrollBehaviorX,o=e.scrollBehaviorY,s=r.currentPos>r.minScrollPos||r.currentPos<r.maxScrollPos||o.currentPos>o.minScrollPos||o.currentPos<o.maxScrollPos;return e.animater.pending||s},t.prototype.checkDOMUpdate=function(){var e=this,r=this.scroll.scroller.content,o=m(r),s=o.width,a=o.height,n=function(){if(!e.stopObserver){o=m(r);var v=o.width,c=o.height;(s!==v||a!==c)&&e.scroll.refresh(),s=v,a=c,l()}},l=function(){setTimeout(function(){n()},1e3)};l()},t.prototype.registerHooks=function(e,r,o){e.on(r,o,this),this.hooksFn.push([e,r,o])},t.prototype.stopObserve=function(){this.stopObserver=!0,this.observer&&this.observer.disconnect()},t.prototype.destroy=function(){this.stopObserve(),this.hooksFn.forEach(function(e){var r=e[0],o=e[1],s=e[2];r.off(o,s)}),this.hooksFn.length=0},t.pluginName="observeDOM",t}();const Y={class:"scroll-content"},W={__name:"cu-scroll",props:{scrollX:{type:Boolean,default:!1},scrollY:{type:Boolean,default:!0},scrollbar:{type:[Boolean,Object],default:{}},pullUpLoad:{type:[Boolean,Object],default:!0}},emits:["onScrollEnd"],setup(t,{expose:e,emit:r}){u.use(T),u.use(M),u.use(X),u.use(B);const o=r,s=t,a=P(null);let n=null;const l=()=>{n.refresh()},v=c=>{let{el:p,time:k,offsetX:g,offsetY:O,easing:w}=c;n.scrollToElement(p,k,g,O,w)};return S(()=>{n=new u(a.value,{scrollX:s.scrollX,scrollY:s.scrollY,scrollbar:s.scrollbar,observeDOM:!0,pullUpLoad:s.pullUpLoad,probeType:0,mouseWheel:{speed:20,invert:!1,easeTime:300},preventDefault:!1,bounce:!1,click:!0}),n.on("pullingUp",()=>{o("onScrollEnd"),E(()=>{n.finishPullUp()})})}),e({refresh:l,scrollToElement:v}),(c,p)=>(H(),x("div",{class:L(["scroll-wrapper",{"cu-scrolbar-box":s.scrollbar.interactive}]),ref_key:"scroller",ref:a},[D("div",Y,[C(c.$slots,"default",{},void 0,!0)])],2))}},A=_(W,[["__scopeId","data-v-98591426"]]);export{A as C};
