import{a6 as E,r as I,L as y,M as f,j as n,Q as a,V as o,F,a1 as $,k,u as M,X as m,Y as O,a3 as V,a4 as L}from"./vue-chunks-C0QQWOCx.js";import{u as N}from"./robot-11i0Q4Sl.js";import{l as j,k as D,m as q,n as z}from"./index-CfvL06E8.js";import{u as G}from"./index-C7LzbfTg.js";import{_ as J,M as A,e as r,B as Q,J as U,E as X}from"../../index-0jhxEUZS.js";import"./index-DLXS2gFD.js";import{I as Y}from"./Input-C2joc_0K.js";import{_ as H}from"./index-B7J0MlTk.js";import{_ as W}from"./index-Bfy09-jv.js";import{_ as Z}from"./index-DnBQfJsj.js";import"./axios-Cm0UX6qg.js";import"./qs-CnxcMLjH.js";import"./crypto-js-C2SrYqGA.js";import"./dayjs-CsGPDCY7.js";import"./FormItemContext-BtHm9ijx.js";import"./index-CIBVllRY.js";import"./Search-IP_DCQEs.js";import"./SearchOutlined-BPrf0z-8.js";import"./isPlainObject-DgCxKo0N.js";import"./inputProps-DKMe6fry.js";import"./TextArea-4ibeqG6S.js";import"./statusUtils-BN1jNO5O.js";import"./index-Di6HYDsH.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./Password-D0V1lqaH.js";const h=c=>(V("data-v-98f755ff"),c=c(),L(),c),ee={class:"page-container"},te=h(()=>o("div",{class:"page-title"},"API Key管理",-1)),oe=h(()=>o("div",{class:"alert-content"},[o("div",null," 请妥善保管您的API Key,注意不要外泄。API Key外泄可能导致其他人使用此Key访问您的机器人，消耗您模型资源。 ")],-1)),ne={class:"opration-box"},se={style:{"margin-left":"auto"},href:"https://www.yuque.com/zhimaxiaoshiwangluo/pggco1/bg1ol40fo68pgdae",target:"_blank"},ae={class:"list-box"},ie={class:"key-content"},le=h(()=>o("span",null,"API Key：",-1)),re={class:"right-box"},ce={__name:"index",setup(c){const{toClipboard:C}=G(),K=N(),{robotInfo:d}=E(K),p=I(""),v=I([]),u=()=>{j({robot_key:d.value.robot_key}).then(e=>{p.value=e.data.end_point,v.value=e.data.list})};u();const P=e=>{q({robot_key:d.value.robot_key,id:e.id}).then(t=>{r.success("更新成功"),u()})},w=()=>{A.confirm({title:k("div",{style:"color:#262626; font-weight: 600;"},"新增API Key"),icon:null,content:k("div",{style:" color: #f10; line-height: 22px;"},"请妥善保管您的API Key,注意不要外泄。API Key外泄可能导致其他人使用此Key访问您的机器人，消耗您模型资源。"),bodyStyle:{padding:"12px 8px 4px 12px"},okText:"创建",width:480,onOk:()=>{B()},onCancel:()=>{}})},B=()=>{D({robot_key:d.value.robot_key}).then(e=>{r.success("创建成功"),u()})},T=e=>{let t=5,l=S(e.key),i=A.confirm({title:`确定删除API Key：${l}`,icon:n(X),content:k("div",{style:{color:"#FB363F"}},"删除后，将无法使用该Key调用接口"),okText:t+" 确 定",okType:"danger",cancelText:"取 消",okButtonProps:{disabled:!0},onOk(){z({robot_key:d.value.robot_key,id:e.id}).then(b=>{r.success("删除成功"),u()})},onCancel(){}}),_=setInterval(()=>{t==1?(i.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(_),_=void 0):(t-=1,i.update({okText:t+" 确 定",okButtonProps:{disabled:!0}}))},1e3)};function S(e){let t=e.slice(0,4),l=e.slice(-4);return e.length<=4?e:e.length<=8?t+"...":t+"..."+l}const g=async e=>{try{await C(e),r.success("复制成功")}catch{r.error("复制失败")}};return(e,t)=>{const l=H,i=Q,_=Y,b=W,R=Z;return y(),f("div",ee,[te,n(l,{class:"mt8",type:"info","show-icon":""},{icon:a(()=>[o("div",null,[n(M(U))])]),message:a(()=>[oe]),_:1}),o("div",ne,[n(i,{type:"primary",onClick:w},{default:a(()=>[m("新增API Key")]),_:1}),n(_,{value:p.value,"onUpdate:value":t[1]||(t[1]=s=>p.value=s),style:{width:"500px"},readonly:""},{addonBefore:a(()=>[o("span",{onClick:t[0]||(t[0]=s=>g(p.value)),style:{cursor:"pointer"}},"复制API Endpoint")]),_:1},8,["value"]),o("a",se,[n(i,null,{default:a(()=>[m("API 文档")]),_:1})])]),o("div",ae,[(y(!0),f(F,null,$(v.value,s=>(y(),f("div",{class:"list-item",key:s.id},[n(R,{justify:"space-between",align:"center"},{default:a(()=>[o("div",ie,[le,o("span",null,O(s.key),1)]),o("div",re,[n(b,{onChange:x=>P(s),checked:s.status==1,"checked-children":"开","un-checked-children":"关"},null,8,["onChange","checked"]),n(i,{onClick:x=>g(s.key)},{default:a(()=>[m("复制")]),_:2},1032,["onClick"]),n(i,{danger:"",onClick:x=>T(s)},{default:a(()=>[m("删除")]),_:2},1032,["onClick"])])]),_:2},1024)]))),128))])])}}},$e=J(ce,[["__scopeId","data-v-98f755ff"]]);export{$e as default};
