import{C as j}from"./cu-scroll-C2rhBLXP.js";import{s as A,g as J,a as W,b as D,d as E}from"./index-xJ7lndAQ.js";import{r as u,L as a,M as d,j as r,Q as i,V as o,X as y,F as M,a1 as P,a8 as U,Y as g,a6 as L,a3 as F,a4 as Q,a0 as q,A as X,u as Y,P as I}from"./vue-chunks-Bxyh5WP6.js";import{_ as R,e as z,M as T,B as G,E as H}from"../../index-CWYf_R7c.js";import"./index-Dsf1d2yx.js";import{R as K,_ as Z}from"./RadioButton-B3MvGE55.js";import{C as tt}from"./index-Dg6a-pZR.js";import{_ as et}from"./TextArea-C1_B5Wm2.js";import{P as ot}from"./PlusOutlined-Cu0dwBBw.js";import{_ as st}from"./index-C1M6HpEG.js";import{_ as at}from"./index-qoVpjV_n.js";import{_ as nt}from"./index-DxeJG8dU.js";import{a as it}from"./index-BpJVI6iv.js";import"./pull-up.esm-JZ91zQ8P.js";import"./observe-dom.esm-DPKTicVt.js";import"./axios-Cm0UX6qg.js";import"./qs-CEiBKtbM.js";import"./crypto-js-C0fK7Mgg.js";import"./dayjs-BgtA0fgD.js";import"./FormItemContext-CY3sS3S3.js";import"./index-_6sIWoCk.js";import"./statusUtils-D2ojHtZY.js";import"./index-C_rHdEod.js";import"./Trigger-DXFMCREP.js";import"./inputProps-CuDRpClH.js";import"./index-BYiIgJN3.js";import"./colors-CmI3I2v0.js";import"./index-Quu5uF5b.js";import"./useMaxLevel-B077fvfm.js";import"./index-BLHGs8uC.js";import"./slide-BHEoaamw.js";import"./isMobile-D_4OiXLP.js";import"./CheckOutlined-DAabT47N.js";import"./DownOutlined-BawL_eGx.js";import"./SearchOutlined-gkqcN_Zr.js";import"./move-DtLl1qq4.js";import"./collapseMotion-DDsixTll.js";import"./responsiveObserve-BtDP6tEg.js";import"./css-grC2A7nw.js";import"./index-SLPzh8Tt.js";import"./LeftOutlined-BYYrM9Fu.js";import"./RightOutlined-BOQt46xG.js";import"./index-Dy5dJRfD.js";import"./dropdown-BMPfc6hB.js";import"./Dropdown-BiMe9RPS.js";import"./index-Cyz9zV9F.js";import"./shallowequal-Do1xa-L4.js";import"./index-mQw8zXXP.js";import"./Input-BW-N7Cx9.js";import"./Search-C52Nu70G.js";import"./isPlainObject-Q-ndSLdg.js";import"./Password-BrrLsfMb.js";const V=x=>(F("data-v-a8be05df"),x=x(),Q(),x),lt={class:"form-modal-box"},rt={class:"form-item"},dt=V(()=>o("div",{class:"form-label"},[y("敏感词"),o("span",null,"(一行一个，最多1000个敏感词)")],-1)),_t={class:"form-content"},ct={class:"form-item"},pt=V(()=>o("div",{class:"form-label"},"生效机器人",-1)),ut={class:"form-content"},mt={key:0,class:"robot-list"},vt={class:"robot-name-text"},ht={__name:"add-sensitive-modal",props:{robotList:{type:Array,default:()=>[]}},emits:["ok"],setup(x,{expose:O,emit:c}){const N=c,h=x,w=u(!1),B=u("添加敏感词"),C=u(""),m=u(""),p=u(0),_=u([]),t=e=>{w.value=!0,C.value=e.id||"",m.value=e.words||"",p.value=+e.trigger_type||0,_.value=e.robot_ids||[]},v=e=>{_.value.includes(e.id)?_.value=_.value.filter(l=>l!==e.id):_.value.push(e.id)},f=()=>{if(!m.value)return z.error("请输入敏感词");if(p.value==1&&_.value.length==0)return z.error("请选择机器人");A({id:C.value,words:m.value,trigger_type:p.value,robot_ids:_.value.join(",")}).then(e=>{z.success(C.value?"修改成功":"添加成功"),w.value=!1,N("ok")})};return O({show:t}),(e,l)=>{const $=et,S=K,k=Z,b=tt,s=T;return a(),d("div",null,[r(s,{open:w.value,"onUpdate:open":l[2]||(l[2]=n=>w.value=n),title:B.value,onOk:f,width:620},{default:i(()=>[o("div",lt,[o("div",rt,[dt,o("div",_t,[r($,{value:m.value,"onUpdate:value":l[0]||(l[0]=n=>m.value=n),placeholder:"请输入敏感词",style:{height:"160px"}},null,8,["value"])])]),o("div",ct,[pt,o("div",ut,[r(k,{value:p.value,"onUpdate:value":l[1]||(l[1]=n=>p.value=n)},{default:i(()=>[r(S,{value:0},{default:i(()=>[y("所有机器人")]),_:1}),r(S,{value:1},{default:i(()=>[y("指定机器人")]),_:1})]),_:1},8,["value"]),p.value==1?(a(),d("div",mt,[(a(!0),d(M,null,P(h.robotList,n=>(a(),d("div",{class:"checked-item",key:n.id},[r(b,{onClick:U(zt=>v(n),["stop"]),checked:_.value.includes(n.id)},{default:i(()=>[o("div",vt,g(n.robot_name),1)]),_:2},1032,["onClick","checked"])]))),128))])):L("",!0)])])])]),_:1},8,["open","title"])])}}},ft=R(ht,[["__scopeId","data-v-a8be05df"]]),kt={class:"user-model-page"},bt={class:"page-title"},gt={class:"add-block"},yt={class:"list-wrapper"},xt={class:"content-box"},wt={class:"text-over-box"},Ct={key:1,class:"text-over-box"},St={key:0},$t={class:"text-over-box"},Lt={key:1,class:"text-over-box"},Ot=["onClick"],It=["onClick"],Mt={__name:"index",setup(x){q().query;const O=u([]),c=X({page:1,size:20,total:0}),N=t=>{c.page=t.current,c.size=t.pageSize,h()},h=()=>{W({...c}).then(t=>{let v=t.data.list||[];O.value=v.map(f=>{let e=JSON.parse(f.robot_data),l=e.map(k=>k.robot_name).join(";"),$=e.map(k=>k.id),S=f.words.split(`
`).join("；");return{...f,robot_data:e,robot_name_desc:l,robot_ids:$,words_desc:S}}),c.total=t.data.total})};h();const w=t=>{D({id:t.id}).then(v=>{h()})},B=t=>{T.confirm({title:"删除确认",icon:r(H),content:`确定要删除敏感词[${t.words_desc}]吗？`,okText:"删除",okType:"danger",cancelText:"取消",onOk(){E({id:t.id}).then(v=>{z.success("删除成功"),h()})},onCancel(){}})},C=u(null),m=(t={})=>{C.value.show(JSON.parse(JSON.stringify(t)))},p=u([]);J().then(t=>{p.value=t.data||[]});const _=[{title:"敏感词",dataIndex:"words_desc",key:"words_desc",ellipsis:!0,width:300},{title:"生效机器人",dataIndex:"robot_name_desc",key:"robot_name_desc",ellipsis:!0,width:300},{title:"是否启用",key:"status",dataIndex:"status",width:150},{title:"操作",key:"action",width:120}];return(t,v)=>{const f=G,e=st,l=at,$=nt,S=it,k=j;return a(),d("div",kt,[o("div",bt,[y(" 敏感词管理 "),o("div",gt,[r(f,{type:"primary",onClick:v[0]||(v[0]=b=>m()),icon:r(Y(ot))},{default:i(()=>[y("添加敏感词")]),_:1},8,["icon"])])]),o("div",yt,[r(k,null,{default:i(()=>[o("div",xt,[r(S,{columns:_,"data-source":O.value,pagination:{current:c.page,total:c.total,pageSize:c.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]},onChange:N},{bodyCell:i(({column:b,record:s})=>[b.key==="words_desc"?(a(),d(M,{key:0},[s.words_desc.length>20?(a(),I(e,{key:0,overlayStyle:{"max-width":"500px"}},{title:i(()=>[y(g(s.words_desc),1)]),default:i(()=>[o("div",wt,g(s.words_desc),1)]),_:2},1024)):(a(),d("div",Ct,g(s.words_desc),1))],64)):L("",!0),b.key==="robot_name_desc"?(a(),d(M,{key:1},[s.trigger_type==0?(a(),d("div",St,"所有机器人")):(a(),d(M,{key:1},[s.robot_name_desc.length>20?(a(),I(e,{key:0,overlayStyle:{"max-width":"500px"}},{title:i(()=>[y(g(s.robot_name_desc),1)]),default:i(()=>[o("div",$t,g(s.robot_name_desc),1)]),_:2},1024)):(a(),d("div",Lt,g(s.robot_name_desc),1))],64))],64)):L("",!0),b.key==="status"?(a(),I(l,{key:2,onChange:n=>w(s),checked:s.status==1,"checked-children":"开","un-checked-children":"关"},null,8,["onChange","checked"])):L("",!0),b.key==="action"?(a(),I($,{key:3,gap:12,style:{"white-space":"nowrap"}},{default:i(()=>[o("a",{onClick:n=>m(s)},"编辑",8,Ot),o("a",{onClick:n=>B(s)},"删除",8,It)]),_:2},1024)):L("",!0)]),_:1},8,["data-source","pagination"])])]),_:1}),r(ft,{onOk:h,robotList:p.value,ref_key:"addaddSensitiveModalRef",ref:C},null,8,["robotList"])])])}}},Me=R(Mt,[["__scopeId","data-v-daf9eb55"]]);export{Me as default};
