import{a0 as N,b as v,w as A,a5 as R,L as o,M as a,V as s,F as $,a1 as V,u as f,a2 as q,j as t,Q as c,X as I,Y as y,a6 as P,P as x,r as L,v as H,B as K,a7 as Q,a8 as W,A as F,U,a9 as X,S as Y,W as D}from"./vue-chunks-Bxyh5WP6.js";import{L as G,a as J}from"./locale-dropdown-CdfEu08b.js";import{_ as b,d as Z,a as S,b as ee,R as te,c as oe,r as se,e as ae,M as re}from"../../index-CWYf_R7c.js";import{_ as ne,B as le}from"./index-qebt7rSa.js";import{_ as ie,M as ce}from"./index-Cyz9zV9F.js";import"./index-Dy5dJRfD.js";import{D as ue}from"./dropdown-BMPfc6hB.js";import{v as _e}from"./validate-8MtiUsxW.js";import{F as E,_ as pe}from"./index-Cm_NtOSH.js";import{_ as de}from"./index-BkDjPG1x.js";import{_ as me}from"./Password-BrrLsfMb.js";import"./index-mQw8zXXP.js";import"./axios-Cm0UX6qg.js";import"./qs-CEiBKtbM.js";import"./crypto-js-C0fK7Mgg.js";import"./dayjs-BgtA0fgD.js";import"./DownOutlined-BawL_eGx.js";import"./shallowequal-Do1xa-L4.js";import"./Trigger-DXFMCREP.js";import"./collapseMotion-DDsixTll.js";import"./slide-BHEoaamw.js";import"./index-C_rHdEod.js";import"./index-C1M6HpEG.js";import"./colors-CmI3I2v0.js";import"./Dropdown-BiMe9RPS.js";import"./RightOutlined-BOQt46xG.js";import"./move-DtLl1qq4.js";import"./isPlainObject-Q-ndSLdg.js";import"./responsiveObserve-BtDP6tEg.js";import"./QuestionCircleOutlined-BggeZNYy.js";import"./FormItemContext-CY3sS3S3.js";import"./Input-BW-N7Cx9.js";import"./statusUtils-D2ojHtZY.js";import"./inputProps-CuDRpClH.js";import"./index-BYiIgJN3.js";import"./Search-C52Nu70G.js";import"./SearchOutlined-gkqcN_Zr.js";import"./TextArea-C1_B5Wm2.js";const ve={class:"navbar-wrapper"},fe={class:"navbar"},he={__name:"layout-navbar",setup(h){const e=N(),r=v(()=>e.meta.activeMenu||""),u=v(()=>e.path.split("/")[1]),_=[{id:1,key:"robot",label:"robot",title:"应用",path:"/robot/list",permission:["RobotManage"]},{id:2,key:"library",label:"library",title:"知识库",path:"/library/list",permission:["LibraryManage"]},{id:3,key:"PublicLibrary",label:"PublicLibrary",title:"对外文档",path:"/public-library/list",permission:["*:*:*"]},{id:4,key:"database",label:"database",title:"数据库",path:"/database/list",permission:["FormManage"]},{id:5,key:"chat-monitor",label:"chat-monitor",title:"实时会话",path:"/chat-monitor/index",permission:["*:*:*"]},{id:6,key:"user",label:"user",title:"系统管理",path:"/user/model",permission:["ModelManage","TokenManage","TeamManage","AccountManage","CompanyManage","ClientSideManage"]}];return A(()=>e.path,()=>{},{immediate:!0}),(d,n)=>{const l=R("router-link");return o(),a("div",ve,[s("div",fe,[(o(),a($,null,V(_,i=>(o(),a($,null,[f(Z)(i.permission)?(o(),a("div",{class:q(["nav-menu",{active:i.key===u.value||i.key===r.value}]),key:i.key},[t(l,{to:i.path,class:"nav-menu-name"},{default:c(()=>[I(y(i.title),1)]),_:2},1032,["to"])],2)):P("",!0)],64))),64))])])}}},ye=b(he,[["__scopeId","data-v-d7ac1224"]]),be={class:"layout-breadcrumb"},ge={key:1,class:"page-title"},ke={__name:"layout-breadcrumb",props:{title:{type:[String,Boolean],default:""},items:{type:[Array,Boolean],default:()=>[]}},setup(h){const e=h;return(r,u)=>{const _=R("router-link"),d=ne,n=le;return o(),a("div",be,[e.items.length>0?(o(),x(n,{key:0},{default:c(()=>[(o(!0),a($,null,V(e.items,(l,i)=>(o(),a($,{key:l.title},[i!==e.items.length-1?(o(),x(d,{key:0},{default:c(()=>[t(_,{to:l.path},{default:c(()=>[I(y(l.title),1)]),_:2},1032,["to"])]),_:2},1024)):(o(),x(d,{key:1},{default:c(()=>[I(y(l.title),1)]),_:2},1024))],64))),128))]),_:1})):(o(),a("div",ge,y(e.title),1))])}}},we=b(ke,[["__scopeId","data-v-c69a461d"]]),Me={class:"layout-footer"},xe={class:"copyright-text"},$e={__name:"layout-footer",setup(h){const e=S(),{t:r}=ee(),u=L(null);return H(()=>{u.value=setInterval(()=>{setTimeout(()=>{e.refreshToken()},0)},te)}),K(()=>{clearInterval(u.value),u.value=null}),(_,d)=>(o(),a("div",Me,[s("div",xe,y(f(r)("common.copyright")),1)]))}},Pe=b($e,[["__scopeId","data-v-ab337acb"]]),Se={key:0,class:"user-dropdown"},Ce=["src"],Ie={class:"user-name"},Le={__name:"user-dropdown",setup(h){const e=S(),{userInfo:r,avatar:u,user_name:_}=Q(e),d=()=>{e.logoutConfirm(!0)};return(n,l)=>{const i=oe,g=ie,m=ce,w=ue;return f(r)?(o(),a("div",Se,[t(w,null,{overlay:c(()=>[t(m,null,{default:c(()=>[t(g,null,{default:c(()=>[s("a",{href:"javascript:;",onClick:d},"退出登录")]),_:1})]),_:1})]),default:c(()=>[s("div",{class:"user-dropdown-link",onClick:l[0]||(l[0]=W(()=>{},["prevent"]))},[s("img",{class:"user-avatar",src:f(u),alt:""},null,8,Ce),s("span",Ie,y(f(_)),1),t(i,{name:"arrow-down",style:{"font-size":"16px",color:"#8c8c8c"}})])]),_:1})])):P("",!0)}}},Re=b(Le,[["__scopeId","data-v-a80b4e62"]]),Te={class:"form-box"},Be={__name:"reset-password",setup(h,{expose:e}){const r=S(),u=E.useForm,_=L(!0),d=L("重置登录密码"),n=F({password:"",check_password:"",id:r.userInfo.user_id}),l=F({password:[{message:"请输入登录密码",required:!0},{validator:async(C,p)=>!_e(p)&&p?Promise.reject("密码必须包含字母、数字或者字符中的两种，6-32位"):Promise.resolve()}],check_password:[{message:"请输入确认密码",required:!0},{validator:async(C,p)=>p!=n.password&&p?Promise.reject("两次输入的密码不一致"):Promise.resolve()}]}),{resetFields:i,validate:g,validateInfos:m}=u(n,l),w=()=>{g().then(()=>{se({...X(n)}).then(C=>{ae.success("修改成功"),_.value=!1,r.reset(!0)})})},M=()=>{r.setResetPassModal()};return e({open}),(C,p)=>{const j=de,T=me,B=pe,O=E,z=re;return o(),a("div",null,[t(z,{open:_.value,"onUpdate:open":p[2]||(p[2]=k=>_.value=k),title:d.value,onOk:w,width:"520px",onCancel:M},{default:c(()=>[t(j,{class:"alert-box",message:"您还未修改初始密码，为了保障您的数据安全，请您尽快重置密码。",type:"info","show-icon":""}),s("div",Te,[t(O,{layout:"vertical"},{default:c(()=>[t(B,U({label:"登录密码"},f(m).password),{default:c(()=>[t(T,{value:n.password,"onUpdate:value":p[0]||(p[0]=k=>n.password=k),placeholder:"密码必须包含字母、数字或者字符中的两种，6-32位"},null,8,["value"])]),_:1},16),t(B,U({label:"确认密码"},f(m).check_password),{default:c(()=>[t(T,{value:n.check_password,"onUpdate:value":p[1]||(p[1]=k=>n.check_password=k),placeholder:"请重新输入密码"},null,8,["value"])]),_:1},16)]),_:1})])]),_:1},8,["open","title"])])}}},Fe=b(Be,[["__scopeId","data-v-9de4c189"]]),Ue={class:"admin-layout"},De={class:"layout-header-wrapper"},Ee={class:"layout-header"},Ne={class:"header-left"},Ve={class:"header-body"},je={class:"header-right"},Oe={class:"item-box"},ze={class:"item-box"},Ae={class:"layout-body"},qe={key:0,class:"layout-breadcrumb-wrapper"},He={class:"layout-footer-wrapper"},Ke={__name:"index",setup(h){const e=N(),r=S(),u=v(()=>e.meta.isCustomPage||!1),_=v(()=>e.meta.pageStyle||{}),d=v(()=>e.meta.bgColor||"#ffffff"),n=v(()=>e.meta.breadcrumb||[]),l=v(()=>e.meta.hideTitle||!1),i=v(()=>e.meta.title||!1),g=v(()=>{var m;return((m=r.userInfo)==null?void 0:m.d_pass)==1&&r.isShowResetPassModal});return(m,w)=>{const M=R("router-view");return o(),a("div",Ue,[s("div",De,[s("div",Ee,[s("div",Ne,[t(G)]),s("div",Ve,[t(ye)]),s("div",je,[s("div",Oe,[t(J)]),s("div",ze,[t(Re)])])])]),s("div",Ae,[u.value?Y(m.$slots,"default",{key:0},()=>[t(M)],!0):(o(),a("div",{key:1,class:"page-wrapper",style:D({"background-color":d.value})},[l.value?P("",!0):(o(),a("div",qe,[t(we,{items:n.value,title:i.value},null,8,["items","title"])])),s("div",{class:"page-container",style:D({..._.value})},[t(M)],4)],4))]),s("div",He,[t(Pe)]),g.value?(o(),x(Fe,{key:0})):P("",!0)])}}},Rt=b(Ke,[["__scopeId","data-v-9381a9a9"]]);export{Rt as default};
