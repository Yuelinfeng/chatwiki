import{b as P,$ as T,r as k,L as d,M as c,V as t,j as a,u as y,a8 as $,F as b,a1 as F,a7 as p,Y as _,Q as r,a3 as O,a4 as E}from"./vue-chunks-C0QQWOCx.js";import{A as L,_ as V}from"./add-data-sheet-BW2LUeqU.js";import{g as j,d as A}from"./index-_EvXQDvG.js";import{_ as N,d as R,M as q,E as G,e as Q}from"../../index-0jhxEUZS.js";import{_ as Y,M as z}from"./index-E5vI2LlI.js";import"./index-D1sUEdFa.js";import{D as H}from"./dropdown-CSJoU83q.js";import{P as J}from"./PlusCircleOutlined-CmawT0Ht.js";import{M as K}from"./MoreOutlined-PxSKOnuq.js";import"./index-CRVpDJ1f.js";import"./colors-mU-75_cq.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./isPlainObject-DgCxKo0N.js";import"./responsiveObserve-Cvd8WiWW.js";import"./collapseMotion-BOXZQl9Y.js";import"./index-DMH-zawU.js";import"./QuestionCircleOutlined-BDfA4Qtk.js";import"./FormItemContext-BtHm9ijx.js";import"./index-DLXS2gFD.js";import"./Input-C2joc_0K.js";import"./statusUtils-BN1jNO5O.js";import"./inputProps-DKMe6fry.js";import"./index-CIBVllRY.js";import"./Search-IP_DCQEs.js";import"./SearchOutlined-BPrf0z-8.js";import"./TextArea-4ibeqG6S.js";import"./index-Di6HYDsH.js";import"./Password-D0V1lqaH.js";import"./axios-Cm0UX6qg.js";import"./qs-CnxcMLjH.js";import"./crypto-js-C2SrYqGA.js";import"./dayjs-CsGPDCY7.js";import"./shallowequal-Fk1l6xhN.js";import"./slide-Dj1hvy3q.js";import"./Dropdown-C9U2MQYn.js";import"./RightOutlined-kK29_F6f.js";import"./move-Cr4SzyVA.js";const C=n=>(O("data-v-ffff1aae"),n=n(),E(),n),U={class:"library-page"},W={class:"library-page-body"},X={class:"list-box"},Z={key:0,class:"list-item-wrapper"},tt=C(()=>t("span",{class:"add-library-text"},"新增数据表",-1)),ot=["onClick"],et={class:"item-header"},st=C(()=>t("img",{class:"library-icon",src:V,alt:""},null,-1)),at={class:"library-info"},it={class:"library-title"},rt={class:"library-num"},nt=["onClick"],lt=["onClick"],dt={class:"library-desc"},ct={__name:"index",setup(n){const x=R();let{role_permission:g}=x;const S=P(()=>g.includes("FormCreate")),w=T(),u=k([]),m=()=>{j({}).then(o=>{u.value=o.data||[]})};m();const f=k(null),v=(o={})=>{f.value.show(o)},D=o=>{w.push({path:"/database/details",query:{form_id:o.id,name:o.name}})},M=o=>{let e=3,i=q.confirm({title:"删除确认",icon:a(G),content:`删除数据表后，表中所有数据将一并被删除，不可恢复。确认删除数据表${o.name}吗?`,okText:e+" 确 定",okType:"danger",okButtonProps:{disabled:!0},cancelText:"取 消",onOk(){B(o)},onCancel(){}}),l=setInterval(()=>{e==1?(i.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(l),l=void 0):(e-=1,i.update({okText:e+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},B=({id:o})=>{A({id:o}).then(()=>{Q.success("删除成功"),m()})};return(o,e)=>{const i=Y,l=z,I=H;return d(),c(b,null,[t("div",U,[t("div",W,[t("div",X,[S.value?(d(),c("div",Z,[t("div",{class:"list-item add-library",onClick:e[0]||(e[0]=s=>v())},[a(y(J),{class:"add-library-icon"}),tt])])):$("",!0),(d(!0),c(b,null,F(u.value,s=>(d(),c("div",{class:"list-item-wrapper",key:s.id},[t("div",{class:"list-item",onClick:p(h=>D(s),["stop"])},[t("div",et,[st,t("div",at,[t("div",it,_(s.name),1),t("div",rt,[t("span",null,"数据："+_(s.entry_count)+"条",1)])]),t("span",{class:"item-action",onClick:e[2]||(e[2]=p(()=>{},["stop"]))},[a(I,null,{overlay:r(()=>[a(l,null,{default:r(()=>[a(i,null,{default:r(()=>[t("a",{href:"javascript:;",onClick:p(h=>v(s),["stop"])},"编 辑",8,nt)]),_:2},1024),a(i,null,{default:r(()=>[t("a",{class:"delete-text-color",href:"javascript:;",onClick:h=>M(s)},"删 除",8,lt)]),_:2},1024)]),_:2},1024)]),default:r(()=>[t("span",{class:"menu-btn",onClick:e[1]||(e[1]=p(()=>{},["prevent"]))},[a(y(K))])]),_:2},1024)])]),t("div",dt,_(s.description),1)],8,ot)]))),128))])])]),a(L,{onOk:m,ref_key:"addDataSheetRef",ref:f},null,512)],64)}}},Jt=N(ct,[["__scopeId","data-v-ffff1aae"]]);export{Jt as default};
